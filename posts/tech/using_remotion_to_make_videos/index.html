<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>How to generate remotion videos using the whispers transcript - Dhanushka&#39;s Blog</title><meta name="description" content="Generating mp4 videos for youtube using transcription from whispers"><meta name="author" content="Dhanushka Jayagoda"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><link rel="icon" type="image/x-icon" href="/favicon.ico"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2479144310234386" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6"></script><script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch (err) {
          // do nothing here
        }
      }
    </script><!-- Google Tag Manager --><!-- End Google Tag Manager --><link rel="stylesheet" href="/_astro/index.B_2FsOPP.css" />
<style>.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}@media print{.no-print,.no-print *{display:none!important}}
</style><script type="module" src="/_astro/hoisted.UksxmqGZ.js"></script></head> <body class="bg-slate-900 text-gray-100"> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8P5P8FQ" height="0" width="0" style="display:none;visibility:hidden"></iframe> </noscript> <!-- End Google Tag Manager (noscript) --> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>Dhanushka&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/dhanushka2001/blog-astro">GitHub</a></li><li class="hover:text-white"><a href="/photos">Photos</a></li></ul></nav></div></div> <div data-pagefind-body>  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="ZwejlQ" prefix="r3" component-url="/_astro/BlogPost._FxswCuE.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;frontmatter&quot;:[0,{&quot;title&quot;:[0,&quot;How to generate remotion videos using the whispers transcript&quot;],&quot;description&quot;:[0,&quot;Generating mp4 videos for youtube using transcription from whispers&quot;],&quot;pubDate&quot;:[0,&quot;Saturday, 5 October 2022 13:00:00 GMT&quot;],&quot;tags&quot;:[1,[[0,&quot;whispers&quot;],[0,&quot;typescript&quot;],[0,&quot;remotion&quot;]]],&quot;imgSrc&quot;:[0,&quot;/imgs/2022/dall-e/DALL·E 2022-10-09 18.23.20 - microphone.png&quot;],&quot;authors&quot;:[1,[[0,&quot;David Li&quot;]]],&quot;file&quot;:[0,&quot;/home/runner/work/blog-astro/blog-astro/src/pages/posts/tech/using_remotion_to_make_videos.md&quot;],&quot;url&quot;:[0,&quot;/posts/tech/using_remotion_to_make_videos&quot;]}]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;BlogPost&quot;,&quot;value&quot;:true}" await-children=""><div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">How to generate remotion videos using the whispers transcript</h1><div class="text-center text-sm text-gray-400"><div class="mt-1">Published:<!-- --> <!-- -->Oct 5, 2022</div><div class="mt-2 flex flex-wrap items-center justify-center gap-4"><div class="flex items-center space-x-2"><img src="/assets/images/avatars/david.png" alt="David Li" class="h-6 w-6 rounded-full object-cover" loading="lazy"/><a href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer" class="hover:underline">David Li</a></div></div></div><div class="flex place-content-center pt-2"><div class="rounded-md px-2 py-1 text-xs font-semibold bg-cyan-400 text-cyan-900"> <a href="/tags/whispers" style="padding-right:3px"> <category>whispers<!-- --> </category></a></div> <div class="rounded-md px-2 py-1 text-xs font-semibold bg-cyan-400 text-cyan-900"> <a href="/tags/typescript" style="padding-right:3px"> <category>typescript<!-- --> </category></a></div> <div class="rounded-md px-2 py-1 text-xs font-semibold bg-sky-400 text-sky-900"> <a href="/tags/remotion" style="padding-right:3px"> <category>remotion<!-- --> </category></a></div> </div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-h-2 aspect-w-3"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2022/dall-e/DALL·E 2022-10-09 18.23.20 - microphone.png" loading="lazy"/></div><div class="prose prose-invert mt-6 prose-img:rounded-lg"><content><astro-slot> <h2 id="summary">Summary</h2>
<p>In the <a href="https://friendlyuser.github.io/posts/tech/using_whispers_to_transcribe_youtube_videos/">previous post</a> I covered how you can use whispers to extract transcript from youtube videos. In this post, I will cover how you can use the in videos generated from remotion.</p>
<h2 id="remotion">Remotion</h2>
<p>First I used a generated remotion template and was inspired by the original tts template, but that relied on tts from azure. Using whispers we can produce a json file with the transcript and then use that to generate the video.</p>
<p>Using ffmpeg I was able to convert the audio to mp3 and then use the whispers library to transcribe the audio. Keep in mind that whispers also works with mp4 files and requires ffmpeg to be installed.</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> colorsJson </span><span style="color:#F92672">from</span><span style="color:#E6DB74"> '../../public/uMzUL.json'</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">const</span><span style="color:#F8F8F2"> {segments} </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> colorsJson;</span></span></code></pre>
<p>First we extract the segments from the json file. The segments are the timestamps for each word in the transcript.</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#66D9EF;font-style:italic">const</span><span style="color:#A6E22E"> renderSegment</span><span style="color:#F92672"> =</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  const</span><span style="color:#F8F8F2"> secAdjustedFrame </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> frame </span><span style="color:#F92672">/</span><span style="color:#F8F8F2"> videoConfig.fps;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  const</span><span style="color:#F8F8F2"> segmentIndex </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> segments.</span><span style="color:#A6E22E">findIndex</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">segment</span><span style="color:#66D9EF;font-style:italic"> =></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">    return</span><span style="color:#F8F8F2"> segment.start </span><span style="color:#F92672">&#x3C;=</span><span style="color:#F8F8F2"> secAdjustedFrame </span><span style="color:#F92672">&#x26;&#x26;</span><span style="color:#F8F8F2"> segment.end </span><span style="color:#F92672">>=</span><span style="color:#F8F8F2"> secAdjustedFrame;</span></span>
<span class="line"><span style="color:#F8F8F2">  });</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  const</span><span style="color:#F8F8F2"> segment </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> segments[segmentIndex];</span></span>
<span class="line"><span style="color:#F92672">  if</span><span style="color:#F8F8F2"> (</span><span style="color:#F92672">!</span><span style="color:#F8F8F2">segment) {</span></span>
<span class="line"><span style="color:#F92672">    return</span><span style="color:#F8F8F2"> &#x3C;>&#x3C;/></span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>The initial code is grabbing the current frame and then finding the segment that matches the current frame. If there is no segment, then we return an empty fragment. Since we are rendering the video in 30 fps and the segments are in seconds, we need to adjust the frame by the fps.</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#66D9EF;font-style:italic">const</span><span style="color:#F8F8F2"> textDuration </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> segment.end </span><span style="color:#F92672">-</span><span style="color:#F8F8F2"> segment.start;</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">const</span><span style="color:#F8F8F2"> words </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> segment.text.</span><span style="color:#A6E22E">split</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">" "</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">return</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F92672">  &#x3C;</span><span style="color:#FD971F;font-style:italic">div</span></span>
<span class="line"><span style="color:#F8F8F2">    key</span><span style="color:#F92672">=</span><span style="color:#F8F8F2">{segment?.text}</span></span>
<span class="line"><span style="color:#F92672">  ></span></span>
<span class="line"><span style="color:#F8F8F2">    {</span><span style="color:#FD971F;font-style:italic">words</span><span style="color:#F8F8F2">.</span><span style="color:#FD971F;font-style:italic">map</span><span style="color:#F8F8F2">((</span><span style="color:#FD971F;font-style:italic">word</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">index</span><span style="color:#F8F8F2">) </span><span style="color:#F92672">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F8F8F2">      const wordStart </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> segment.start </span><span style="color:#F92672">+</span><span style="color:#F8F8F2"> (index </span><span style="color:#F92672">*</span><span style="color:#F8F8F2"> textDuration </span><span style="color:#F92672">/</span><span style="color:#F8F8F2"> words.length);</span></span>
<span class="line"><span style="color:#A6E22E">      return</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F8F8F2">        &#x3C;></span></span>
<span class="line"><span style="color:#F8F8F2">        &#x3C;</span><span style="color:#FD971F;font-style:italic">span</span><span style="color:#F8F8F2"> </span></span>
<span class="line"><span style="color:#FD971F;font-style:italic">          key</span><span style="color:#F92672">=</span><span style="color:#F8F8F2">{word}</span></span>
<span class="line"><span style="color:#FD971F;font-style:italic">          style</span><span style="color:#F92672">=</span><span style="color:#F8F8F2">{{</span></span>
<span class="line"><span style="color:#F8F8F2">            color: titleColor,</span></span>
<span class="line"><span style="color:#F8F8F2">            marginLeft: </span><span style="color:#AE81FF">10</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">            marginRight: </span><span style="color:#AE81FF">10</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">            opacity: (frame </span><span style="color:#F92672">-</span><span style="color:#F8F8F2"> (wordStart </span><span style="color:#F92672">*</span><span style="color:#F8F8F2"> videoConfig.fps)) </span><span style="color:#F92672">/</span><span style="color:#F8F8F2"> (videoConfig.fps </span><span style="color:#F92672">*</span><span style="color:#AE81FF"> 0.5</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">            transform: </span><span style="color:#E6DB74">`scale(</span><span style="color:#F92672">${</span><span style="color:#A6E22E">spring</span><span style="color:#F8F8F2">({</span></span>
<span class="line"><span style="color:#F8F8F2">              fps: videoConfig.fps,</span></span>
<span class="line"><span style="color:#F8F8F2">              frame: frame </span><span style="color:#F92672">-</span><span style="color:#F8F8F2"> (wordStart </span><span style="color:#F92672">*</span><span style="color:#F8F8F2"> videoConfig.fps),</span></span>
<span class="line"><span style="color:#F8F8F2">              config: {</span></span>
<span class="line"><span style="color:#F8F8F2">                damping: </span><span style="color:#AE81FF">100</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">                stiffness: </span><span style="color:#AE81FF">200</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">                mass: </span><span style="color:#AE81FF">0.5</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">              },</span></span>
<span class="line"><span style="color:#F8F8F2">            })</span><span style="color:#F92672">}</span><span style="color:#E6DB74">)`</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">            display: </span><span style="color:#E6DB74">'inline-block'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">          }}</span><span style="color:#F92672">></span></span>
<span class="line"><span style="color:#F8F8F2">            {</span><span style="color:#FD971F;font-style:italic">word</span><span style="color:#F8F8F2">}</span></span>
<span class="line"><span style="color:#F8F8F2">          &#x3C;/</span><span style="color:#FD971F;font-style:italic">span</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">        &#x3C;/></span></span>
<span class="line"><span style="color:#F8F8F2">      )</span></span>
<span class="line"><span style="color:#F8F8F2">    })}</span></span>
<span class="line"><span style="color:#F92672">  &#x3C;/</span><span style="color:#F8F8F2">div</span><span style="color:#F92672">></span></span>
<span class="line"><span style="color:#F8F8F2">);</span></span></code></pre>
<p>We split the segments into words so we can animate each individual word using spring. Whenever you use animations in remotion, in has reference frame for clean animations. In this case, we are using the frame of the video and then adjusting it by the start time of the word. This allows us to have a smooth animation for each word as they appear.</p>
<p>Using the opacity and scale we can animate the words as they appear. The opacity is set to the frame minus the start time of the word divided by the fps. This allows us to have a smooth animation for each word as they appear.</p>
<p>The one disadvantage of using segments, is words linger on the screen for a bit. This is because the segments are based on the audio segment. This means that the words lag the audio before appearing for long segments. This is something that I will need to look into in the future. Thinking that a declining exponential function might be a good way to handle this.</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#66D9EF;font-style:italic">	const</span><span style="color:#A6E22E"> renderImage</span><span style="color:#F92672"> =</span><span style="color:#F8F8F2"> () </span><span style="color:#66D9EF;font-style:italic">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> images </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> [</span><span style="color:#E6DB74">"img1.png"</span><span style="color:#F8F8F2">, </span><span style="color:#E6DB74">"img2.png"</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> imageIndex </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> Math.</span><span style="color:#A6E22E">floor</span><span style="color:#F8F8F2">(frame </span><span style="color:#F92672">/</span><span style="color:#F8F8F2"> (videoConfig.durationInFrames </span><span style="color:#F92672">/</span><span style="color:#F8F8F2"> images.length));</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">		const</span><span style="color:#F8F8F2"> image </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> images[imageIndex];</span></span>
<span class="line"><span style="color:#F92672">		return</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F92672">			&#x3C;</span><span style="color:#F8F8F2">Img src</span><span style="color:#F92672">=</span><span style="color:#F8F8F2">{</span><span style="color:#A6E22E">staticFile</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">image</span><span style="color:#F8F8F2">)} style</span><span style="color:#F92672">=</span><span style="color:#F8F8F2">{{</span></span>
<span class="line"><span style="color:#F8F8F2">				opacity: </span><span style="color:#AE81FF">0.25</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">			}}</span><span style="color:#F92672">/></span></span>
<span class="line"><span style="color:#F8F8F2">		);</span></span>
<span class="line"><span style="color:#F8F8F2">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">	return</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#F92672">		&#x3C;></span></span>
<span class="line"><span style="color:#F8F8F2">		{</span><span style="color:#FD971F;font-style:italic">audioUrl</span><span style="color:#F8F8F2"> ? &#x3C;</span><span style="color:#FD971F;font-style:italic">Audio</span><span style="color:#FD971F;font-style:italic"> src</span><span style="color:#F92672">=</span><span style="color:#F8F8F2">{</span><span style="color:#A6E22E">staticFile</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">audioUrl</span><span style="color:#F8F8F2">)} </span><span style="color:#E6DB74">/> : &#x3C;>&#x3C;/</span><span style="color:#F92672">></span><span style="color:#F8F8F2">}</span></span>
<span class="line"><span style="color:#F8F8F2">		&#x3C;</span><span style="color:#A6E22E;text-decoration:underline">AbsoluteFill</span><span style="color:#F8F8F2">></span></span>
<span class="line"><span style="color:#F8F8F2">			{</span><span style="color:#FD971F;font-style:italic">renderImage</span><span style="color:#F8F8F2">()}</span></span>
<span class="line"><span style="color:#F92672">		&#x3C;/</span><span style="color:#F8F8F2">AbsoluteFill</span><span style="color:#F92672">></span></span>
<span class="line"><span style="color:#F92672">		&#x3C;</span><span style="color:#F8F8F2">h1 style</span><span style="color:#F92672">=</span><span style="color:#F8F8F2">{title}</span><span style="color:#F92672">></span><span style="color:#F8F8F2">{titleText}</span><span style="color:#F92672">&#x3C;/</span><span style="color:#F8F8F2">h1</span><span style="color:#F92672">></span></span>
<span class="line"><span style="color:#F92672">		&#x3C;</span><span style="color:#F8F8F2">h1 style</span><span style="color:#F92672">=</span><span style="color:#F8F8F2">{mainText}</span><span style="color:#F92672">></span></span>
<span class="line"><span style="color:#F8F8F2">			{</span><span style="color:#FD971F;font-style:italic">renderSegment</span><span style="color:#F8F8F2">()}</span></span>
<span class="line"><span style="color:#F92672">			&#x3C;/</span><span style="color:#F8F8F2">h1</span><span style="color:#F92672">></span></span>
<span class="line"><span style="color:#F92672">		&#x3C;/></span></span>
<span class="line"><span style="color:#F8F8F2">	);</span></span></code></pre>
<p>Using dalle to generate images, I was able to generate a few images that I could use to overlay on the video. It shows a new image when the video reachs the halfway point. An opacity of 0.25 is used so the text is clear. I also added the extracted audio (using <code>ffmpeg</code>) to the video.</p>
<p>To view the video you can see it on youtube.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/rMQ9ZVRMQzQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p><a href="https://www.youtube.com/watch?v=rMQ9ZVRMQzQ&#x26;ab_channel=GenericPerson">https://www.youtube.com/watch?v=rMQ9ZVRMQzQ&#x26;ab_channel=GenericPerson</a></p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://github.com/FriendlyUser/auto_youtube_caption_system/tree/v1.0.0">https://github.com/FriendlyUser/auto_youtube_caption_system/tree/v1.0.0</a></li>
</ul> </astro-slot></content></div><div id="comments"></div></div></div></div><!--astro:end--></astro-island> <div class="mx-auto mt-5 max-w-prose flex justify-between gap-4 border-t border-gray-700 pt-8 text-sm text-gray-400 dark:text-gray-500"> <div class="w-full sm:w-[48%] xl:w-auto"> <div class="text-xs uppercase">Previous</div> <a class="text-blue-400 hover:underline" href="/posts/tech/using_whispers_to_transcribe_youtube_videos"> How to transcribe youtube videos using whispers </a> </div> <div class="text-right w-full sm:w-[48%] xl:w-auto"> <div class="text-xs uppercase">Next</div> <a class="text-blue-400 hover:underline" href="/posts/tech/uploading_videos_in_youtube_through_the_api"> Updating videos using the youtube api </a> </div> </div><div class="mt-6 text-center"> <a href="/posts" class="text-blue-400 hover:underline text-sm">
&larr; Back to blog
</a> </div> <astro-island uid="1KiplR" prefix="r0" component-url="/_astro/ScrollButtons.BdAHGQrx.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{}" ssr="" client="load" opts="{&quot;name&quot;:&quot;ScrollButtons&quot;,&quot;value&quot;:true}" await-children=""><div class="fixed bottom-8 right-8 z-50 flex flex-col gap-3 opacity-0 transition-opacity duration-300"><button aria-label="Scroll to comments" class="rounded-full bg-gray-200 p-2 text-gray-600 shadow-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll to top" class="rounded-full bg-gray-200 p-2 text-gray-600 shadow-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><!--astro:end--></astro-island>  </div> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2025<!-- --> by <!-- -->Dhanushka&#x27;s Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/dhanushka2001" target="_blank" rel="noopener noreferrer">Dhanushka</a>. Last updated on <!-- -->2025-07-11<!-- -->.</div></div></div> </body></html>