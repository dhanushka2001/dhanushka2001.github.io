<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Here I will cover how to use chatgpt extract keywords and describe code. - Dhanushka&#39;s Blog</title><meta name="description" content="In this post I will show you how to use chatgpt to describe code and get keywords."><meta name="author" content="Dhanushka Jayagoda"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><link rel="icon" type="image/x-icon" href="/favicon.ico"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2479144310234386" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6"></script><script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch (err) {
          // do nothing here
        }
      }
    </script><!-- Google Tag Manager --><!-- End Google Tag Manager --><link rel="stylesheet" href="/_astro/index.BsaAxKtc.css" />
<style>.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}@media print{.no-print,.no-print *{display:none!important}}
</style><script type="module" src="/_astro/hoisted.UksxmqGZ.js"></script></head> <body class="bg-slate-900 text-gray-100"> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8P5P8FQ" height="0" width="0" style="display:none;visibility:hidden"></iframe> </noscript> <!-- End Google Tag Manager (noscript) --> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>Dhanushka&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/dhanushka2001/blog-astro">GitHub</a></li><li class="hover:text-white"><a href="/photos">Photos</a></li></ul></nav></div></div> <div data-pagefind-body>  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="2nYyaI" prefix="r2" component-url="/_astro/BlogPost.BdPqyukv.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;frontmatter&quot;:[0,{&quot;tags&quot;:[1,[[0,&quot;chatgpt&quot;],[0,&quot;python&quot;]]],&quot;title&quot;:[0,&quot;Here I will cover how to use chatgpt extract keywords and describe code.&quot;],&quot;description&quot;:[0,&quot;In this post I will show you how to use chatgpt to describe code and get keywords.&quot;],&quot;pubDate&quot;:[0,&quot;Fri, 7 June 2024&quot;],&quot;imgSrc&quot;:[0,&quot;/imgs/2023/1220160824_A_dream_of_a_distant_galaxy__concept_art__matte_painting__HQ__4k.png&quot;],&quot;authors&quot;:[1,[[0,&quot;David Li&quot;]]],&quot;file&quot;:[0,&quot;/home/runner/work/blog-astro/blog-astro/src/pages/posts/tech/python/chatgpt_extract_description_and_keywords.md&quot;],&quot;url&quot;:[0,&quot;/posts/tech/python/chatgpt_extract_description_and_keywords&quot;]}]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;BlogPost&quot;,&quot;value&quot;:true}" await-children=""><div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">Here I will cover how to use chatgpt extract keywords and describe code.</h1><div class="text-center text-sm text-gray-400"><div class="mt-1">Published:<!-- --> <!-- -->Jun 7, 2024</div><div class="mt-2 flex flex-wrap items-center justify-center gap-4"><div class="flex items-center space-x-2"><img src="/assets/images/avatars/david.png" alt="David Li" class="h-6 w-6 rounded-full object-cover" loading="lazy"/><a href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer" class="hover:underline">David Li</a></div></div></div><div class="flex place-content-center pt-2"><div class="rounded-md px-2 py-1 text-xs font-semibold bg-cyan-400 text-cyan-900"> <a href="/tags/chatgpt" style="padding-right:3px"> <category>chatgpt<!-- --> </category></a></div> <div class="rounded-md px-2 py-1 text-xs font-semibold bg-green-400 text-green-900"> <a href="/tags/python" style="padding-right:3px"> <category>python<!-- --> </category></a></div> </div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-h-2 aspect-w-3"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2023/1220160824_A_dream_of_a_distant_galaxy__concept_art__matte_painting__HQ__4k.png" loading="lazy"/></div><div class="prose prose-invert mt-6 prose-img:rounded-lg"><content><astro-slot> <p>Describing code and getting keywords is important for a number of reasons:</p>
<ol>
<li>Code descriptions can help you and other developers understand what a particular piece of code does, which is especially important when working on large projects with multiple contributors.</li>
<li>Keywords can help you quickly find the code you need when searching through a large codebase. By using specific keywords, you can narrow down your search and find the relevant code much faster.</li>
<li>Code descriptions and keywords can also make your code more accessible to others who may not be familiar with the codebase. This can be particularly helpful when onboarding new team members or when collaborating with external partners.</li>
</ol>
<p>Overall, code descriptions and keywords can help make your code more efficient, maintainable, and accessible to others.</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#88846F"># openai script that generates descriptions and keywords for a given tex file</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> os</span></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> subprocess</span></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> random</span></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> time</span></span>
<span class="line"><span style="color:#F92672">from</span><span style="color:#F8F8F2"> pyChatGPT </span><span style="color:#F92672">import</span><span style="color:#F8F8F2"> ChatGPT</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">path </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> os.path.dirname(os.path.realpath(__file__))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">def</span><span style="color:#A6E22E"> get_files</span><span style="color:#F8F8F2">():</span></span>
<span class="line"><span style="color:#88846F">    # r=root, d=directories, f = files</span></span>
<span class="line"><span style="color:#F92672">    for</span><span style="color:#F8F8F2"> r, d, f </span><span style="color:#F92672">in</span><span style="color:#F8F8F2"> os.walk(path):</span></span>
<span class="line"><span style="color:#F92672">        for</span><span style="color:#F8F8F2"> file </span><span style="color:#F92672">in</span><span style="color:#F8F8F2"> f:</span></span>
<span class="line"><span style="color:#F92672">            if</span><span style="color:#E6DB74"> '.tex'</span><span style="color:#F92672"> in</span><span style="color:#F8F8F2"> file:</span></span>
<span class="line"><span style="color:#F92672">                yield</span><span style="color:#F8F8F2"> os.path.join(r, file)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">def</span><span style="color:#A6E22E"> main</span><span style="color:#F8F8F2">():</span></span>
<span class="line"><span style="color:#88846F">    # seed prompt</span></span>
<span class="line"><span style="color:#F8F8F2">    sessionToken </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> os.getenv(</span><span style="color:#E6DB74">"CHATGPT_TOKEN"</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">    sample_prompt </span><span style="color:#F92672">=</span><span style="color:#66D9EF;font-style:italic"> f</span><span style="color:#E6DB74">"""</span></span>
<span class="line"><span style="color:#E6DB74">    You will be given a series of latex source code for diagrams followed by two prompts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74">        for prompt 1: describe the code above. Ignore syntax and incomplete code.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E6DB74">        for prompt 2: what are the keywords for the latex diagram in a comma separated list with no other text. Do not include the word latex or diagram or documentclass or usepackage in your response. Do not provide examples. Do not attempt to correct code. Do not provide code either. Make sure keywords are at least 3 letters.</span></span>
<span class="line"><span style="color:#E6DB74">    </span></span>
<span class="line"><span style="color:#E6DB74">    respond with confirm if you understand.</span></span>
<span class="line"><span style="color:#E6DB74">    """</span></span>
<span class="line"><span style="color:#F8F8F2">    api </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> ChatGPT(sessionToken)</span></span>
<span class="line"><span style="color:#F8F8F2">    api.send_message(sample_prompt)</span></span>
<span class="line"><span style="color:#F8F8F2">    time.sleep(random.randint(</span><span style="color:#AE81FF">2</span><span style="color:#F8F8F2">, </span><span style="color:#AE81FF">3</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">    curr_count </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> 0</span></span>
<span class="line"><span style="color:#F8F8F2">    max_count </span><span style="color:#F92672">=</span><span style="color:#AE81FF"> 20</span></span>
<span class="line"><span style="color:#F92672">    for</span><span style="color:#F8F8F2"> f </span><span style="color:#F92672">in</span><span style="color:#F8F8F2"> get_files():</span></span>
<span class="line"><span style="color:#88846F">        # print(file)</span></span>
<span class="line"><span style="color:#88846F">        # get relative path to file</span></span>
<span class="line"><span style="color:#F8F8F2">        rel_path </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> os.path.relpath(f, path)</span></span>
<span class="line"><span style="color:#88846F">        # read text file</span></span>
<span class="line"><span style="color:#F92672">        with</span><span style="color:#66D9EF"> open</span><span style="color:#F8F8F2">(f, </span><span style="color:#E6DB74">'r'</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">errors</span><span style="color:#F92672">=</span><span style="color:#E6DB74">"ignore"</span><span style="color:#F8F8F2">) </span><span style="color:#F92672">as</span><span style="color:#F8F8F2"> raw_tex_file:</span></span>
<span class="line"><span style="color:#F8F8F2">            tex_source </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> raw_tex_file.read()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">        description_txt </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> rel_path.replace(</span><span style="color:#E6DB74">'.tex'</span><span style="color:#F8F8F2">, </span><span style="color:#E6DB74">'_description.txt'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#88846F">        # replace .tex with keywords_.txt</span></span>
<span class="line"><span style="color:#F8F8F2">        keywords_txt </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> rel_path.replace(</span><span style="color:#E6DB74">'.tex'</span><span style="color:#F8F8F2">, </span><span style="color:#E6DB74">'_keywords.txt'</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">        # if both files exist skip</span></span>
<span class="line"><span style="color:#F92672">        if</span><span style="color:#F8F8F2"> os.path.exists(description_txt) </span><span style="color:#F92672">and</span><span style="color:#F8F8F2"> os.path.exists(keywords_txt):</span></span>
<span class="line"><span style="color:#F92672">            continue</span></span>
<span class="line"><span style="color:#88846F">        # api.send_message(f"{tex_source} \n \n \n describe the code.")</span></span>
<span class="line"><span style="color:#F8F8F2">        api.send_message(</span><span style="color:#66D9EF;font-style:italic">f</span><span style="color:#E6DB74">"</span><span style="color:#AE81FF">{</span><span style="color:#F8F8F2">tex_source</span><span style="color:#AE81FF">}</span><span style="color:#E6DB74">"</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#88846F">        # check if description_txt and keywords_txt exist</span></span>
<span class="line"><span style="color:#F92672">        if</span><span style="color:#F8F8F2"> os.path.exists(description_txt) </span><span style="color:#F92672">==</span><span style="color:#AE81FF"> False</span><span style="color:#F8F8F2">:</span></span>
<span class="line"><span style="color:#F8F8F2">            raw_resp </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> api.send_message(</span><span style="color:#66D9EF;font-style:italic">f</span><span style="color:#E6DB74">"describe the code."</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#88846F">            # replace .tex withnt description_.txt</span></span>
<span class="line"><span style="color:#F8F8F2">            tex_description </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> raw_resp[</span><span style="color:#E6DB74">'message'</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#88846F">            # save description to file</span></span>
<span class="line"><span style="color:#F92672">            with</span><span style="color:#66D9EF"> open</span><span style="color:#F8F8F2">(description_txt, </span><span style="color:#E6DB74">'w'</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">encoding</span><span style="color:#F92672">=</span><span style="color:#E6DB74">"utf-8"</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">errors</span><span style="color:#F92672">=</span><span style="color:#E6DB74">"replace"</span><span style="color:#F8F8F2">) </span><span style="color:#F92672">as</span><span style="color:#F8F8F2"> description_file:</span></span>
<span class="line"><span style="color:#F8F8F2">                description_file.write(tex_description)</span></span>
<span class="line"><span style="color:#88846F">            # randomly sleep for 3 to 6 seconds</span></span>
<span class="line"><span style="color:#F8F8F2">            time.sleep(random.randint(</span><span style="color:#AE81FF">3</span><span style="color:#F8F8F2">, </span><span style="color:#AE81FF">6</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">        </span></span>
<span class="line"><span style="color:#F92672">        if</span><span style="color:#F8F8F2"> os.path.exists(keywords_txt) </span><span style="color:#F92672">==</span><span style="color:#AE81FF"> False</span><span style="color:#F8F8F2">:</span></span>
<span class="line"><span style="color:#88846F">            # generate keywords</span></span>
<span class="line"><span style="color:#F8F8F2">            raw_resp </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> api.send_message(</span><span style="color:#66D9EF;font-style:italic">f</span><span style="color:#E6DB74">"what are the keywords for the latex diagram above in a comma separated list with no other text. Do not include the word latex or diagram in your response.  Do not provide examples. Do not attempt to correct code. Do not provide code either. Make sure keywords are at least 3 letters."</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#88846F">            # get output and save to keywords_txt</span></span>
<span class="line"><span style="color:#F8F8F2">            tex_keywords </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> raw_resp[</span><span style="color:#E6DB74">'message'</span><span style="color:#F8F8F2">]</span></span>
<span class="line"><span style="color:#88846F">            # save keywords to file</span></span>
<span class="line"><span style="color:#F92672">            with</span><span style="color:#66D9EF"> open</span><span style="color:#F8F8F2">(keywords_txt, </span><span style="color:#E6DB74">'w'</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">encoding</span><span style="color:#F92672">=</span><span style="color:#E6DB74">"utf-8"</span><span style="color:#F8F8F2">, </span><span style="color:#FD971F;font-style:italic">errors</span><span style="color:#F92672">=</span><span style="color:#E6DB74">"replace"</span><span style="color:#F8F8F2">) </span><span style="color:#F92672">as</span><span style="color:#F8F8F2"> keywords_file:</span></span>
<span class="line"><span style="color:#F8F8F2">                keywords_file.write(tex_keywords)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">        # increase curr_count</span></span>
<span class="line"><span style="color:#F8F8F2">        curr_count </span><span style="color:#F92672">+=</span><span style="color:#AE81FF"> 1</span></span>
<span class="line"><span style="color:#88846F">        # exit after 10 files</span></span>
<span class="line"><span style="color:#F92672">        if</span><span style="color:#F8F8F2"> curr_count </span><span style="color:#F92672">>=</span><span style="color:#F8F8F2"> max_count:</span></span>
<span class="line"><span style="color:#F92672">            break</span></span>
<span class="line"><span style="color:#F8F8F2">        time.sleep(random.randint(</span><span style="color:#AE81FF">3</span><span style="color:#F8F8F2">, </span><span style="color:#AE81FF">6</span><span style="color:#F8F8F2">))</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">if</span><span style="color:#F8F8F2"> __name__ </span><span style="color:#F92672">==</span><span style="color:#E6DB74"> '__main__'</span><span style="color:#F8F8F2">:</span></span>
<span class="line"><span style="color:#F8F8F2">    main()</span></span>
<span class="line"><span style="color:#F8F8F2"> </span></span></code></pre>
<p>This is a Python script that uses the OpenAI API to generate descriptions and keywords for LaTeX source code files. The script first walks through the directory tree, searching for files with the .tex extension. For each file found, the script prompts the user to provide a description of the code and a list of keywords that describe the code.</p>
<p>Sleeping is important when calling an API because it can help prevent rate limiting or other issues that may arise from making too many requests too quickly. When an API is called repeatedly and too frequently, it can lead to a high volume of traffic, which can put a strain on the server and potentially cause errors or slowdowns.</p>
<p>Sleeping, or pausing the script for a set amount of time between API requests, can help prevent this by spacing out the requests and giving the server time to process each request before receiving the next one. This can help ensure that the API requests are handled correctly and avoid any issues with rate limiting or server errors.</p>
<p>Additionally, some APIs may have rate limits that specify the maximum number of requests that can be made in a certain time period. Sleeping can help ensure that the script does not exceed these limits and avoids being blocked by the API provider.</p>
<p>Chatgpt has a timeout of about 1 hour after a large volume of requests.</p>
<p>The script uses the pyChatGPT library to communicate with the OpenAI API. It sends the LaTeX source code to the API, along with prompts for descriptions and keywords. It then saves the response to a text file with the same name as the LaTeX source file, but with “_description” or “_keywords” appended to the file name.</p>
<p>The script checks if the description and keyword files already exist, and if they do, skips the file. It also limits the number of files processed to 20, but this can be adjusted by changing the <code>max_count</code> variable.</p>
<p>Overall, this script can be a useful tool for generating descriptions and keywords for LaTeX source code, which can be helpful for documentation and searchability purposes.</p>
<p>For a full example please check out my Latex Diagrams project.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://raw.githubusercontent.com/FriendlyUser/LatexDiagrams/master/genTxtFiles.py">https://raw.githubusercontent.com/FriendlyUser/LatexDiagrams/master/genTxtFiles.py</a></li>
<li><a href="https://github.com/FriendlyUser/latex-diagrams-docs">https://github.com/FriendlyUser/latex-diagrams-docs</a></li>
</ul> </astro-slot></content></div></div></div></div><!--astro:end--></astro-island>  </div> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2025<!-- --> by <!-- -->Dhanushka&#x27;s Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/dhanushka2001" target="_blank" rel="noopener noreferrer">Dhanushka</a>. Last updated on <!-- -->2025-07-08<!-- -->.</div></div><script src="https://cdn.botpress.cloud/webchat/v0/inject.js"></script><script src="https://mediafiles.botpress.cloud/0df54034-3318-451a-aed0-3923a4ee25a5/webchat/config.js" defer=""></script></div> </body></html>