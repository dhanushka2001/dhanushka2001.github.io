<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Android Mockito Mocking Framework A Comprehensive Overview - Dhanushka&#39;s Blog</title><meta name="description" content="In this article , we will discuss the fundamentals of the Mockito framework and demonstrate its usage in Android development"><meta name="author" content="Dhanushka Jayagoda"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><link rel="icon" type="image/x-icon" href="/favicon.ico"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2479144310234386" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6"></script><script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch (err) {
          // do nothing here
        }
      }
    </script><!-- Google Tag Manager --><!-- End Google Tag Manager --><link rel="stylesheet" href="/_astro/index.B_2FsOPP.css" />
<style>.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}@media print{.no-print,.no-print *{display:none!important}}
</style><script type="module" src="/_astro/hoisted.UksxmqGZ.js"></script></head> <body class="bg-slate-900 text-gray-100"> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8P5P8FQ" height="0" width="0" style="display:none;visibility:hidden"></iframe> </noscript> <!-- End Google Tag Manager (noscript) --> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>Dhanushka&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/dhanushka2001/blog-astro">GitHub</a></li><li class="hover:text-white"><a href="/photos">Photos</a></li></ul></nav></div></div> <div data-pagefind-body>  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="1unRB3" prefix="r3" component-url="/_astro/BlogPost._FxswCuE.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;frontmatter&quot;:[0,{&quot;title&quot;:[0,&quot;Android Mockito Mocking Framework A Comprehensive Overview&quot;],&quot;pubDate&quot;:[0,&quot;2024-07-27T15:56:56.000Z&quot;],&quot;description&quot;:[0,&quot;In this article , we will discuss the fundamentals of the Mockito framework and demonstrate its usage in Android development&quot;],&quot;tags&quot;:[1,[]],&quot;imgSrc&quot;:[0,&quot;/imgs/2023/3185275103.png&quot;],&quot;authors&quot;:[1,[[0,&quot;David Li&quot;]]],&quot;file&quot;:[0,&quot;/home/runner/work/blog-astro/blog-astro/src/pages/posts/tech/2023/Android_Mockito_Mocking_Framework_A_Comprehensive_Overview.md&quot;],&quot;url&quot;:[0,&quot;/posts/tech/2023/Android_Mockito_Mocking_Framework_A_Comprehensive_Overview&quot;]}]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;BlogPost&quot;,&quot;value&quot;:true}" await-children=""><div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">Android Mockito Mocking Framework A Comprehensive Overview</h1><div class="text-center text-sm text-gray-400"><div class="mt-1">Published:<!-- --> <!-- -->Jul 27, 2024</div><div class="mt-2 flex flex-wrap items-center justify-center gap-4"><div class="flex items-center space-x-2"><img src="/assets/images/avatars/david.png" alt="David Li" class="h-6 w-6 rounded-full object-cover" loading="lazy"/><a href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer" class="hover:underline">David Li</a></div></div></div><div class="flex place-content-center pt-2"></div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-h-2 aspect-w-3"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2023/3185275103.png" loading="lazy"/></div><div class="prose prose-invert mt-6 prose-img:rounded-lg"><content><astro-slot> <h1 id="android-mockito-mocking-framework-a-comprehensive-overview">Android Mockito Mocking Framework: A Comprehensive Overview</h1>
<h2 id="introduction">Introduction</h2>
<p><strong>Mockito</strong> is a popular open-source mocking framework for Java and Android development. It allows developers to create and configure mock objects, which are useful for isolating components under test from external dependencies, such as databases, web services, or other components. Mockito simplifies the process of creating mock objects and provides a clean, easy-to-read syntax to define and configure them. In this article, we will discuss the fundamentals of the Mockito framework and demonstrate its usage in Android development.</p>
<h2 id="what-is-mocking">What is Mocking?</h2>
<p>In software testing, <em>mocking</em> refers to the practice of creating simulated objects that mimic the behavior of real objects in a controlled manner. Mock objects are typically used when testing a specific component or unit of an application, where the goal is to isolate it from the rest of the system. By using mock objects, developers can ensure that the component under test is not affected by any external factors, making it easier to pinpoint the source of any issues that may arise during testing.</p>
<h2 id="mockito-basics">Mockito Basics</h2>
<p>To get started with Mockito, you first need to add the proper dependencies to your Android project. In your <code>build.gradle</code> file, add the following lines to the <code>dependencies</code> block:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F8F8F2">testImplementation </span><span style="color:#E6DB74">'org.mockito:mockito-core:3.11.2'</span></span>
<span class="line"><span style="color:#F8F8F2">androidTestImplementation </span><span style="color:#E6DB74">'org.mockito:mockito-android:3.11.2'</span></span></code></pre>
<p><em>NOTE: Replace the version numbers with the latest available Mockito versions.</em></p>
<h3 id="creating-mock-objects">Creating Mock Objects</h3>
<p>With Mockito, creating a mock object is as simple as calling the <code>mock()</code> method:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#66D9EF;font-style:italic">MyClass</span><span style="color:#F8F8F2"> myMock </span><span style="color:#F92672">=</span><span style="color:#A6E22E"> mock</span><span style="color:#F8F8F2">(MyClass.class);</span></span></code></pre>
<p>This creates a mock object of type <code>MyClass</code>. You can now use this mock object in your tests, just like you would use a real instance of <code>MyClass</code>.</p>
<h3 id="stubbing-method-behavior">Stubbing Method Behavior</h3>
<p>One of the main features of Mockito is the ability to define custom behavior for methods in your mock objects. This is known as <em>stubbing</em>. To stub a method, you use the <code>when()</code> method, followed by the <code>thenReturn()</code> method:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#A6E22E">when</span><span style="color:#F8F8F2">(myMock.</span><span style="color:#A6E22E">myMethod</span><span style="color:#F8F8F2">()).</span><span style="color:#A6E22E">thenReturn</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">"Hello, World!"</span><span style="color:#F8F8F2">);</span></span></code></pre>
<p>In this example, we’re stubbing the <code>myMethod()</code> method in <code>myMock</code> to return the string <code>"Hello, World!"</code> when it’s called. You can also use the <code>doReturn()</code> method for stubbing:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#A6E22E">doReturn</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">"Hello, World!"</span><span style="color:#F8F8F2">).</span><span style="color:#A6E22E">when</span><span style="color:#F8F8F2">(myMock).</span><span style="color:#A6E22E">myMethod</span><span style="color:#F8F8F2">();</span></span></code></pre>
<p>Both approaches achieve the same result, but the <code>doReturn()</code> method is recommended when dealing with void methods or methods that throw exceptions.</p>
<h3 id="verifying-method-calls">Verifying Method Calls</h3>
<p>In addition to stubbing methods, Mockito allows you to verify that specific methods were called during the execution of your tests. To do this, you use the <code>verify()</code> method:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#A6E22E">verify</span><span style="color:#F8F8F2">(myMock).</span><span style="color:#A6E22E">myMethod</span><span style="color:#F8F8F2">();</span></span></code></pre>
<p>This line verifies that the <code>myMethod()</code> method was called exactly once on <code>myMock</code>. If the method was not called, or if it was called a different number of times, the test will fail.</p>
<h2 id="mockito-in-android-development">Mockito in Android Development</h2>
<p>In Android development, Mockito is particularly useful for testing components such as Presenters, ViewModels, or Repositories, where you may want to isolate them from Android-specific dependencies, such as Context or Services.</p>
<p>To demonstrate Mockito in action, let’s consider a simple example of testing a ViewModel. We’ll use the following ViewModel class:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F92672">public</span><span style="color:#F92672"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline">MyViewModel</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">    private</span><span style="color:#66D9EF;font-style:italic"> MyRepository</span><span style="color:#F8F8F2"> repository;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">    public</span><span style="color:#A6E22E"> MyViewModel</span><span style="color:#F8F8F2">(</span><span style="color:#66D9EF;font-style:italic">MyRepository</span><span style="color:#FD971F;font-style:italic"> repository</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#FD971F">        this</span><span style="color:#F8F8F2">.repository </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> repository;</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">    public</span><span style="color:#66D9EF;font-style:italic"> String</span><span style="color:#A6E22E"> getMessage</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F92672">        return</span><span style="color:#F8F8F2"> repository.</span><span style="color:#A6E22E">fetchMessage</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>In this example, we have a ViewModel that depends on a <code>MyRepository</code> object to fetch a message. We want to test the <code>getMessage()</code> method in isolation, so we’ll create a mock of the <code>MyRepository</code> class and stub its <code>fetchMessage()</code> method:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F92672">public</span><span style="color:#F92672"> class</span><span> </span><span style="color:#A6E22E;text-decoration:underline">MyViewModelTest</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">    private</span><span style="color:#66D9EF;font-style:italic"> MyViewModel</span><span style="color:#F8F8F2"> viewModel;</span></span>
<span class="line"><span style="color:#F92672">    private</span><span style="color:#66D9EF;font-style:italic"> MyRepository</span><span style="color:#F8F8F2"> mockRepository;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">    @</span><span style="color:#66D9EF;font-style:italic">Before</span></span>
<span class="line"><span style="color:#F92672">    public</span><span style="color:#66D9EF;font-style:italic"> void</span><span style="color:#A6E22E"> setUp</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F8F8F2">        mockRepository </span><span style="color:#F92672">=</span><span style="color:#A6E22E"> mock</span><span style="color:#F8F8F2">(MyRepository.class);</span></span>
<span class="line"><span style="color:#F8F8F2">        viewModel </span><span style="color:#F92672">=</span><span style="color:#F92672"> new</span><span style="color:#A6E22E"> MyViewModel</span><span style="color:#F8F8F2">(mockRepository);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">    @</span><span style="color:#66D9EF;font-style:italic">Test</span></span>
<span class="line"><span style="color:#F92672">    public</span><span style="color:#66D9EF;font-style:italic"> void</span><span style="color:#A6E22E"> testGetMessage</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#88846F">        // Stub the fetchMessage() method in the mock repository</span></span>
<span class="line"><span style="color:#A6E22E">        when</span><span style="color:#F8F8F2">(mockRepository.</span><span style="color:#A6E22E">fetchMessage</span><span style="color:#F8F8F2">()).</span><span style="color:#A6E22E">thenReturn</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">"Hello, World!"</span><span style="color:#F8F8F2">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">        // Call the getMessage() method in the ViewModel</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">        String</span><span style="color:#F8F8F2"> message </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> viewModel.</span><span style="color:#A6E22E">getMessage</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">        // Verify that the fetchMessage() method was called on the mock repository</span></span>
<span class="line"><span style="color:#A6E22E">        verify</span><span style="color:#F8F8F2">(mockRepository).</span><span style="color:#A6E22E">fetchMessage</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">        // Assert that the getMessage() method returns the expected value</span></span>
<span class="line"><span style="color:#A6E22E">        assertEquals</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">"Hello, World!"</span><span style="color:#F8F8F2">, message);</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>In this test, we’re using Mockito to create a mock of the <code>MyRepository</code> class, stub its <code>fetchMessage()</code> method, and verify that it’s called when we invoke the <code>getMessage()</code> method in the ViewModel. Thisway, we can test the ViewModel’s behavior in isolation, without having to worry about the actual implementation of the <code>MyRepository</code> class.</p>
<h2 id="advanced-mockito-features">Advanced Mockito Features</h2>
<p>In addition to the basic features discussed so far, Mockito offers several advanced features that can help you write more powerful and flexible tests.</p>
<h3 id="argument-matchers">Argument Matchers</h3>
<p>Sometimes you may need to stub a method that accepts arguments, but you don’t care about the exact values of those arguments. In such cases, you can use argument matchers, which allow you to define a more general condition for the arguments. Mockito provides several built-in argument matchers, such as <code>any()</code>, <code>eq()</code>, and <code>isNull()</code>.</p>
<p>Here’s an example of using the <code>any()</code> matcher:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#A6E22E">when</span><span style="color:#F8F8F2">(myMock.</span><span style="color:#A6E22E">myMethod</span><span style="color:#F8F8F2">(</span><span style="color:#A6E22E">any</span><span style="color:#F8F8F2">(String.class))).</span><span style="color:#A6E22E">thenReturn</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">"Hello, World!"</span><span style="color:#F8F8F2">);</span></span></code></pre>
<p>In this example, we’re stubbing the <code>myMethod()</code> method to return the string <code>"Hello, World!"</code> when it’s called with any <code>String</code> argument.</p>
<h3 id="stubbing-with-callbacks">Stubbing with Callbacks</h3>
<p>If you need more control over the behavior of a stubbed method, you can use the <code>thenAnswer()</code> method to provide a custom implementation. This method takes an instance of the <code>Answer</code> interface, which defines a single method, <code>answer()</code>, that will be called when the stubbed method is invoked.</p>
<p>Here’s an example of using the <code>thenAnswer()</code> method:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#A6E22E">when</span><span style="color:#F8F8F2">(myMock.</span><span style="color:#A6E22E">myMethod</span><span style="color:#F8F8F2">(</span><span style="color:#A6E22E">any</span><span style="color:#F8F8F2">(String.class))).</span><span style="color:#A6E22E">thenAnswer</span><span style="color:#F8F8F2">(</span><span style="color:#F92672">new</span><span style="color:#66D9EF;font-style:italic"> Answer</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">String</span><span style="color:#F8F8F2">>() {</span></span>
<span class="line"><span style="color:#F8F8F2">    @</span><span style="color:#66D9EF;font-style:italic">Override</span></span>
<span class="line"><span style="color:#F92672">    public</span><span style="color:#66D9EF;font-style:italic"> String</span><span style="color:#A6E22E"> answer</span><span style="color:#F8F8F2">(</span><span style="color:#66D9EF;font-style:italic">InvocationOnMock</span><span style="color:#FD971F;font-style:italic"> invocation</span><span style="color:#F8F8F2">) </span><span style="color:#F92672">throws</span><span style="color:#66D9EF;font-style:italic"> Throwable</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">        String</span><span style="color:#F8F8F2"> arg </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> (String) invocation.</span><span style="color:#A6E22E">getArguments</span><span style="color:#F8F8F2">()[</span><span style="color:#AE81FF">0</span><span style="color:#F8F8F2">];</span></span>
<span class="line"><span style="color:#F92672">        return</span><span style="color:#E6DB74"> "Hello, "</span><span style="color:#F92672"> +</span><span style="color:#F8F8F2"> arg </span><span style="color:#F92672">+</span><span style="color:#E6DB74"> "!"</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">    }</span></span>
<span class="line"><span style="color:#F8F8F2">});</span></span></code></pre>
<p>In this example, we’re stubbing the <code>myMethod()</code> method to return a custom string based on its input argument. The <code>answer()</code> method receives an <code>InvocationOnMock</code> object, which provides access to the arguments passed to the stubbed method.</p>
<h3 id="mocking-final-classes-and-methods">Mocking Final Classes and Methods</h3>
<p>By default, Mockito cannot mock final classes or methods. However, you can enable this feature by creating a file named <code>org.mockito.plugins.MockMaker</code> in your project’s <code>test/resources/mockito-extensions</code> directory, and adding the following line:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span>mock-maker-inline</span></span></code></pre>
<p>With this configuration, Mockito will be able to mock final classes and methods, although doing so may have some limitations and performance implications.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Mockito is a powerful and flexible mocking framework that significantly simplifies the process of creating and configuring mock objects in your Android tests. By using Mockito, you can write more focused, isolated, and reliable tests, which ultimately leads to a more robust and maintainable application.</p>
<p>In this article, we have covered the basics of Mockito, including creating mock objects, stubbing methods, and verifying method calls. We’ve also discussed some advanced features, such as argument matchers, stubbing with callbacks, and mocking final classes and methods. By incorporating Mockito into your Android testing toolkit, you’ll be better equipped to tackle a wide range of testing challenges and ensure the quality of your application.</p> </astro-slot></content></div><div id="comments"></div></div></div></div><!--astro:end--></astro-island> <div class="mx-auto mt-5 max-w-prose flex justify-between gap-4 border-t border-gray-700 pt-8 text-sm text-gray-400 dark:text-gray-500"> <div class="w-full sm:w-[48%] xl:w-auto"> <div class="text-xs uppercase">Previous</div> <a class="text-blue-400 hover:underline" href="/posts/tech/html_introduction"> Introduction to csharp </a> </div> <div class="text-right w-full sm:w-[48%] xl:w-auto"> <div class="text-xs uppercase">Next</div> <a class="text-blue-400 hover:underline" href="/posts/tech/2023/Building_and_Packaging_Rust_Applications_with_Rust's_Build_Tools"> Building and Packaging Rust Applications with Rust&#39;s Build Tools </a> </div> </div><div class="mt-6 text-center"> <a href="/posts" class="text-blue-400 hover:underline text-sm">
&larr; Back to blog
</a> </div> <astro-island uid="1KiplR" prefix="r0" component-url="/_astro/ScrollButtons.BdAHGQrx.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{}" ssr="" client="load" opts="{&quot;name&quot;:&quot;ScrollButtons&quot;,&quot;value&quot;:true}" await-children=""><div class="fixed bottom-8 right-8 z-50 flex flex-col gap-3 opacity-0 transition-opacity duration-300"><button aria-label="Scroll to comments" class="rounded-full bg-gray-200 p-2 text-gray-600 shadow-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll to top" class="rounded-full bg-gray-200 p-2 text-gray-600 shadow-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><!--astro:end--></astro-island>  </div> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2025<!-- --> by <!-- -->Dhanushka&#x27;s Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/dhanushka2001" target="_blank" rel="noopener noreferrer">Dhanushka</a>. Last updated on <!-- -->2025-07-11<!-- -->.</div></div></div> </body></html>