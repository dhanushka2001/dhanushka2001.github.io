<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Using Testify in Golang A Comprehensive Guide - Dhanushka&#39;s Blog</title><meta name="description" content="In this article, we'll explore the key features of Testify, and see how to use them effectively in your Golang projects"><meta name="author" content="Dhanushka Jayagoda"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><link rel="icon" type="image/x-icon" href="/favicon.ico"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2479144310234386" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6"></script><script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch (err) {
          // do nothing here
        }
      }
    </script><!-- Google Tag Manager --><!-- End Google Tag Manager --><link rel="stylesheet" href="/_astro/index.B_2FsOPP.css" />
<style>.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}@media print{.no-print,.no-print *{display:none!important}}
</style><script type="module" src="/_astro/hoisted.UksxmqGZ.js"></script></head> <body class="bg-slate-900 text-gray-100"> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8P5P8FQ" height="0" width="0" style="display:none;visibility:hidden"></iframe> </noscript> <!-- End Google Tag Manager (noscript) --> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>Dhanushka&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/dhanushka2001/blog-astro">GitHub</a></li><li class="hover:text-white"><a href="/photos">Photos</a></li></ul></nav></div></div> <div data-pagefind-body>  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="1ddnXw" prefix="r3" component-url="/_astro/BlogPost._FxswCuE.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;frontmatter&quot;:[0,{&quot;description&quot;:[0,&quot;In this article, we&#39;ll explore the key features of Testify, and see how to use them effectively in your Golang projects&quot;],&quot;imgSrc&quot;:[0,&quot;/imgs/2023/1797349317.png&quot;],&quot;pubDate&quot;:[0,&quot;2024-04-29T08:21:13.000Z&quot;],&quot;tags&quot;:[1,[]],&quot;title&quot;:[0,&quot;Using Testify in Golang A Comprehensive Guide&quot;],&quot;authors&quot;:[1,[[0,&quot;David Li&quot;]]],&quot;file&quot;:[0,&quot;/home/runner/work/blog-astro/blog-astro/src/pages/posts/tech/2023/Using_Testify_in_Golang_A_Comprehensive_Guide.md&quot;],&quot;url&quot;:[0,&quot;/posts/tech/2023/Using_Testify_in_Golang_A_Comprehensive_Guide&quot;]}]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;BlogPost&quot;,&quot;value&quot;:true}" await-children=""><div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">Using Testify in Golang A Comprehensive Guide</h1><div class="text-center text-sm text-gray-400"><div class="mt-1">Published:<!-- --> <!-- -->Apr 29, 2024</div><div class="mt-2 flex flex-wrap items-center justify-center gap-4"><div class="flex items-center space-x-2"><img src="/assets/images/avatars/david.png" alt="David Li" class="h-6 w-6 rounded-full object-cover" loading="lazy"/><a href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer" class="hover:underline">David Li</a></div></div></div><div class="flex place-content-center pt-2"></div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-h-2 aspect-w-3"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2023/1797349317.png" loading="lazy"/></div><div class="prose prose-invert mt-6 prose-img:rounded-lg"><content><astro-slot> <h1 id="using-testify-in-golang-a-comprehensive-guide">Using Testify in Golang: A Comprehensive Guide</h1>
<p>Testify is a popular testing framework for the Go programming language. It provides a rich set of assertions and utilities that make it easier to write and maintain tests. In this article, we’ll explore the key features of Testify, and see how to use them effectively in your Golang projects.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#assertions">Assertions</a></li>
<li><a href="#suites">Suites</a></li>
<li><a href="#mocks">Mocks</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>Testify is a library that extends the standard Go testing package. It is designed to provide a more expressive and convenient API for writing tests. Some of the main features of Testify include:</p>
<ul>
<li>A rich set of assertions for common testing scenarios</li>
<li>Test suites for organizing and running related tests</li>
<li>Mocking support for isolating and testing components</li>
</ul>
<h2 id="getting-started">Getting Started</h2>
<p>To use Testify in your project, you need to install the package first. You can do this using the <code>go get</code> command:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span>go get -u github.com/stretchr/testify</span></span></code></pre>
<p>This will install Testify and its dependencies in your Go workspace. Now you can import the package in your test files and start using its features.</p>
<h2 id="assertions">Assertions</h2>
<p>Assertions are the foundation of any test framework. They allow you to compare the actual output of your code with the expected output, and fail the test if they don’t match. Testify provides a rich set of assertions that cover most common testing scenarios.</p>
<p>You can use assertions from the <code>github.com/stretchr/testify/assert</code> package. Here’s an example of a simple test function that uses Testify assertions:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F92672">package</span><span> </span><span style="color:#A6E22E;text-decoration:underline">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#E6DB74">	"testing"</span></span>
<span class="line"><span style="color:#E6DB74">	"github.com/stretchr/testify/assert"</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">func</span><span style="color:#A6E22E"> TestAdd</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">t</span><span style="color:#F92672"> *</span><span style="color:#A6E22E;text-decoration:underline">testing</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E;text-decoration:underline">T</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">	result </span><span style="color:#F92672">:=</span><span style="color:#A6E22E"> Add</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">2</span><span style="color:#F8F8F2">, </span><span style="color:#AE81FF">3</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">	assert.</span><span style="color:#A6E22E">Equal</span><span style="color:#F8F8F2">(t, </span><span style="color:#AE81FF">5</span><span style="color:#F8F8F2">, result, </span><span style="color:#E6DB74">"Add(2, 3) should be 5"</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>In this example, we’re testing the <code>Add()</code> function, which takes two integers as input and returns their sum. We use the <code>Equal</code> assertion from Testify to check if the result of <code>Add(2, 3)</code> is equal to 5.</p>
<p>If the assertion fails, the test will fail, and Testify will print a helpful error message with the expected and actual values.</p>
<h2 id="suites">Suites</h2>
<p>Test suites are a way to organize and run related tests. They can be particularly useful for large projects with many tests, as they allow you to group tests by functionality, and run them in a specific order.</p>
<p>To create a test suite, you need to define a struct that embeds the <code>github.com/stretchr/testify/suite.Suite</code> type:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F92672">package</span><span> </span><span style="color:#A6E22E;text-decoration:underline">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#E6DB74">	"testing"</span></span>
<span class="line"><span style="color:#E6DB74">	"github.com/stretchr/testify/suite"</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">type</span><span> </span><span style="color:#A6E22E;text-decoration:underline">AddSuite</span><span style="color:#F92672"> struct</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span>	</span><span style="color:#A6E22E;text-decoration:underline">suite</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E;text-decoration:underline">Suite</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// Test suite setup and teardown methods, if needed</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">func</span><span style="color:#F8F8F2"> (</span><span style="color:#FD971F;font-style:italic">s </span><span style="color:#F92672">*</span><span style="color:#A6E22E;text-decoration:underline">AddSuite</span><span style="color:#F8F8F2">) </span><span style="color:#A6E22E">TestAdd</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F8F8F2">	result </span><span style="color:#F92672">:=</span><span style="color:#A6E22E"> Add</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">2</span><span style="color:#F8F8F2">, </span><span style="color:#AE81FF">3</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">	s.</span><span style="color:#A6E22E">Equal</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">5</span><span style="color:#F8F8F2">, result, </span><span style="color:#E6DB74">"Add(2, 3) should be 5"</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">func</span><span style="color:#A6E22E"> TestRunAddSuite</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">t</span><span style="color:#F92672"> *</span><span style="color:#A6E22E;text-decoration:underline">testing</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E;text-decoration:underline">T</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">	suite.</span><span style="color:#A6E22E">Run</span><span style="color:#F8F8F2">(t, </span><span style="color:#A6E22E">new</span><span style="color:#F8F8F2">(</span><span style="color:#A6E22E;text-decoration:underline">AddSuite</span><span style="color:#F8F8F2">))</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>Notice that we’ve moved the <code>TestAdd()</code> function inside the <code>AddSuite</code> struct, and changed its receiver from <code>*testing.T</code> to <code>*AddSuite</code>. We can now use the <code>Equal()</code> method from the embedded <code>Suite</code> type, just like we used the <code>Equal()</code> function from the <code>assert</code> package earlier.</p>
<p>To run the test suite, you need to call the <code>suite.Run()</code> function in a separate test function. This function takes a <code>*testing.T</code> argument, and an instance of your test suite.</p>
<h2 id="mocks">Mocks</h2>
<p>Mocks are a powerful feature of Testify that allows you to isolate components and test them independently. They are particularly useful when you’re dealing with external dependencies, such as databases or APIs, which can be hard or expensive to set up for tests.</p>
<p>Testify provides a <code>github.com/stretchr/testify/mock</code> package for creating and using mocks in your tests. Here’s an example of a test that uses a mock object to simulate a database query:</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F92672">package</span><span> </span><span style="color:#A6E22E;text-decoration:underline">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#F8F8F2"> (</span></span>
<span class="line"><span style="color:#E6DB74">	"testing"</span></span>
<span class="line"><span style="color:#E6DB74">	"github.com/stretchr/testify/assert"</span></span>
<span class="line"><span style="color:#E6DB74">	"github.com/stretchr/testify/mock"</span></span>
<span class="line"><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// UserRepository is a mock implementation of a database repository</span></span>
<span class="line"><span style="color:#F92672">type</span><span> </span><span style="color:#A6E22E;text-decoration:underline">UserRepositoryMock</span><span style="color:#F92672"> struct</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span>	</span><span style="color:#A6E22E;text-decoration:underline">mock</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E;text-decoration:underline">Mock</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">// FindUserByID is a method that simulates a database query</span></span>
<span class="line"><span style="color:#F92672">func</span><span style="color:#F8F8F2"> (</span><span style="color:#FD971F;font-style:italic">m </span><span style="color:#F92672">*</span><span style="color:#A6E22E;text-decoration:underline">UserRepositoryMock</span><span style="color:#F8F8F2">) </span><span style="color:#A6E22E">FindUserByID</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">id</span><span style="color:#66D9EF;font-style:italic"> int</span><span style="color:#F8F8F2">) (</span><span style="color:#F92672">*</span><span style="color:#A6E22E;text-decoration:underline">User</span><span style="color:#F8F8F2">, </span><span style="color:#66D9EF;font-style:italic">error</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">	args </span><span style="color:#F92672">:=</span><span style="color:#F8F8F2"> m.</span><span style="color:#A6E22E">Called</span><span style="color:#F8F8F2">(id)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">	if</span><span style="color:#F8F8F2"> args.</span><span style="color:#A6E22E">Get</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">0</span><span style="color:#F8F8F2">) </span><span style="color:#F92672">==</span><span style="color:#AE81FF"> nil</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">		return</span><span style="color:#AE81FF"> nil</span><span style="color:#F8F8F2">, args.</span><span style="color:#A6E22E">Error</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">1</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">	}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">	return</span><span style="color:#F8F8F2"> args.</span><span style="color:#A6E22E">Get</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">0</span><span style="color:#F8F8F2">).(</span><span style="color:#F92672">*</span><span style="color:#A6E22E;text-decoration:underline">User</span><span style="color:#F8F8F2">), args.</span><span style="color:#A6E22E">Error</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">1</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">func</span><span style="color:#A6E22E"> TestFindUserByID</span><span style="color:#F8F8F2">(</span><span style="color:#FD971F;font-style:italic">t</span><span style="color:#F92672"> *</span><span style="color:#A6E22E;text-decoration:underline">testing</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E;text-decoration:underline">T</span><span style="color:#F8F8F2">) {</span></span>
<span class="line"><span style="color:#F8F8F2">	userRepo </span><span style="color:#F92672">:=</span><span style="color:#A6E22E"> new</span><span style="color:#F8F8F2">(</span><span style="color:#A6E22E;text-decoration:underline">UserRepositoryMock</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">	userRepo.</span><span style="color:#A6E22E">On</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">"FindUserByID"</span><span style="color:#F8F8F2">, </span><span style="color:#AE81FF">1</span><span style="color:#F8F8F2">).</span><span style="color:#A6E22E">Return</span><span style="color:#F8F8F2">(</span><span style="color:#F92672">&#x26;</span><span style="color:#A6E22E;text-decoration:underline">User</span><span style="color:#F8F8F2">{ID: </span><span style="color:#AE81FF">1</span><span style="color:#F8F8F2">, Name: </span><span style="color:#E6DB74">"Alice"</span><span style="color:#F8F8F2">}, </span><span style="color:#AE81FF">nil</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">userService </span><span style="color:#F92672">:=</span><span style="color:#A6E22E"> NewUserService</span><span style="color:#F8F8F2">(userRepo)</span></span>
<span class="line"><span style="color:#F8F8F2">user, err </span><span style="color:#F92672">:=</span><span style="color:#F8F8F2"> userService.</span><span style="color:#A6E22E">FindUserByID</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">1</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">assert.</span><span style="color:#A6E22E">NoError</span><span style="color:#F8F8F2">(t, err, </span><span style="color:#E6DB74">"FindUserByID should not return an error"</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">assert.</span><span style="color:#A6E22E">NotNil</span><span style="color:#F8F8F2">(t, user, </span><span style="color:#E6DB74">"FindUserByID should return a user"</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">assert.</span><span style="color:#A6E22E">Equal</span><span style="color:#F8F8F2">(t, </span><span style="color:#AE81FF">1</span><span style="color:#F8F8F2">, user.ID, </span><span style="color:#E6DB74">"User ID should be 1"</span><span style="color:#F8F8F2">)</span></span>
<span class="line"><span style="color:#F8F8F2">assert.</span><span style="color:#A6E22E">Equal</span><span style="color:#F8F8F2">(t, </span><span style="color:#E6DB74">"Alice"</span><span style="color:#F8F8F2">, user.Name, </span><span style="color:#E6DB74">"User name should be Alice"</span><span style="color:#F8F8F2">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F8F8F2">userRepo.</span><span style="color:#A6E22E">AssertExpectations</span><span style="color:#F8F8F2">(t)</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>In this example, we’re testing a <code>UserService</code> that depends on a <code>UserRepository</code> interface for fetching users from a database. We create a <code>UserRepositoryMock</code> struct that implements the <code>UserRepository</code> interface, and use the <code>mock.Mock</code> type from Testify to handle method calls and return values.</p>
<p>The <code>FindUserByID()</code> method in our mock implementation uses the <code>Called()</code> method from <code>mock.Mock</code> to record the call and return the specified values. In our test function, we set up the mock to expect a call to <code>FindUserByID()</code> with the argument <code>1</code>, and return a user object with the same ID.</p>
<p>Finally, we create an instance of <code>UserService</code> with our mock repository, and call the <code>FindUserByID()</code> method on it. We use Testify assertions to check the result of the method, and the <code>AssertExpectations()</code> method from <code>mock.Mock</code> to verify that the expected calls to the mock were made.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Testify is a powerful and expressive testing framework for Go that provides a rich set of features for writing and maintaining tests. With its comprehensive support for assertions, test suites, and mocks, it can help make your tests more robust, readable, and maintainable.</p>
<p>In this article, we covered the basics of using Testify in your Golang projects, including how to get started, use assertions, create test suites, and work with mocks. With these building blocks, you can start leveraging Testify in your own projects and improve the quality of your tests.</p> </astro-slot></content></div><div id="comments"></div></div></div></div><!--astro:end--></astro-island> <div class="mx-auto mt-5 max-w-prose flex justify-between gap-4 border-t border-gray-700 pt-8 text-sm text-gray-400 dark:text-gray-500"> <div class="w-full sm:w-[48%] xl:w-auto"> <div class="text-xs uppercase">Previous</div> <a class="text-blue-400 hover:underline" href="/posts/tech/js/using_lol_api_to_get_games"> Using the league of legends api to get games via deno </a> </div> <div class="text-right w-full sm:w-[48%] xl:w-auto"> <div class="text-xs uppercase">Next</div> <a class="text-blue-400 hover:underline" href="/posts/tech/rust/building_web_apps_with_rust"> Building Web Applications with Rust using Actix Web </a> </div> </div><div class="mt-6 text-center"> <a href="/posts" class="text-blue-400 hover:underline text-sm">
&larr; Back to blog
</a> </div> <astro-island uid="1KiplR" prefix="r0" component-url="/_astro/ScrollButtons.BdAHGQrx.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{}" ssr="" client="load" opts="{&quot;name&quot;:&quot;ScrollButtons&quot;,&quot;value&quot;:true}" await-children=""><div class="fixed bottom-8 right-8 z-50 flex flex-col gap-3 opacity-0 transition-opacity duration-300"><button aria-label="Scroll to comments" class="rounded-full bg-gray-200 p-2 text-gray-600 shadow-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll to top" class="rounded-full bg-gray-200 p-2 text-gray-600 shadow-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><!--astro:end--></astro-island>  </div> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2025<!-- --> by <!-- -->Dhanushka&#x27;s Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/dhanushka2001" target="_blank" rel="noopener noreferrer">Dhanushka</a>. Last updated on <!-- -->2025-07-11<!-- -->.</div></div></div> </body></html>