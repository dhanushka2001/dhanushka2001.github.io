<!DOCTYPE html><html lang="en"> <head><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Flutter todo list with supabase - Dhanushka&#39;s Blog</title><meta name="description" content="Building a simple todo list with supabase"><meta name="author" content="Dhanushka Jayagoda"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><link rel="icon" type="image/x-icon" href="/favicon.ico"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2479144310234386" crossorigin="anonymous"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-119155027-6"></script><script type="text/javascript">
      let slideIndex = 1;
      showSlides(slideIndex);

      function plusSlides(n) {
        showSlides((slideIndex += n));
      }

      function currentSlide(n) {
        showSlides((slideIndex = n));
      }

      function showSlides(n) {
        try {
          let i;
          let slides = document.getElementsByClassName('mySlides');
          let dots = document.getElementsByClassName('demo');
          let captionText = document.getElementById('caption');
          if (n > slides.length) {
            slideIndex = 1;
          }
          if (n < 1) {
            slideIndex = slides.length;
          }
          for (i = 0; i < slides.length; i++) {
            slides[i].style.display = 'none';
          }
          for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(' active', '');
          }
          slides[slideIndex - 1].style.display = 'block';
          dots[slideIndex - 1].className += ' active';
          captionText.innerHTML = dots[slideIndex - 1].alt;
        } catch (err) {
          // do nothing here
        }
      }
    </script><!-- Google Tag Manager --><!-- End Google Tag Manager --><link rel="stylesheet" href="/_astro/index.B_2FsOPP.css" />
<style>.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}@media print{.no-print,.no-print *{display:none!important}}
</style><script type="module" src="/_astro/hoisted.UksxmqGZ.js"></script></head> <body class="bg-slate-900 text-gray-100"> <!-- Google Tag Manager (noscript) --> <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K8P5P8FQ" height="0" width="0" style="display:none;visibility:hidden"></iframe> </noscript> <!-- End Google Tag Manager (noscript) --> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="flex flex-col gap-y-3 sm:flex-row sm:items-center sm:justify-between"><a href="/"><div class="flex items-center bg-gradient-to-br from-sky-500 to-cyan-400 bg-clip-text text-xl font-bold text-transparent"><svg class="mr-1 h-10 w-10 stroke-cyan-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M0 0h24v24H0z" stroke="none"></path><rect x="3" y="12" width="6" height="8" rx="1"></rect><rect x="9" y="8" width="6" height="12" rx="1"></rect><rect x="15" y="4" width="6" height="16" rx="1"></rect><path d="M4 20h14"></path></svg>Dhanushka&#x27;s Blog</div></a><nav><ul class="flex gap-x-3 font-medium text-gray-200"><li class="hover:text-white"><a href="/posts">Blogs</a></li><li class="hover:text-white"><a href="https://github.com/dhanushka2001/blog-astro">GitHub</a></li><li class="hover:text-white"><a href="/photos">Photos</a></li></ul></nav></div></div> <div data-pagefind-body>  <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var v=Object.defineProperty;var A=(c,s,a)=>s in c?v(c,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):c[s]=a;var d=(c,s,a)=>(A(c,typeof s!="symbol"?s+"":s,a),a);var u;{let c={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},s=t=>{let[e,n]=t;return e in c?c[e](n):void 0},a=t=>t.map(s),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([e,n])=>[e,s(n)]));customElements.get("astro-island")||customElements.define("astro-island",(u=class extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var f;if(!this.hydrator||!this.isConnected)return;let e=(f=this.parentElement)==null?void 0:f.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let n=this.querySelectorAll("astro-slot"),r={},l=this.querySelectorAll("template[data-astro-template]");for(let o of l){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("data-astro-template")||"default"]=o.innerHTML,o.remove())}for(let o of n){let i=o.closest(this.tagName);i!=null&&i.isSameNode(this)&&(r[o.getAttribute("name")||"default"]=o.innerHTML)}let h;try{h=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(o){let i=this.getAttribute("component-url")||"<unknown>",b=this.getAttribute("component-export");throw b&&(i+=` (export ${b})`),console.error(`[hydrate] Error parsing props for component ${i}`,this.getAttribute("props"),o),o}let p;await this.hydrator(this)(this.Component,h,r,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),n.disconnect(),this.childrenConnectedCallback()},n=new MutationObserver(()=>{var r;((r=this.lastChild)==null?void 0:r.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});n.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),n=this.getAttribute("client");if(Astro[n]===void 0){window.addEventListener(`astro:${n}`,()=>this.start(),{once:!0});return}try{await Astro[n](async()=>{let r=this.getAttribute("renderer-url"),[l,{default:h}]=await Promise.all([import(this.getAttribute("component-url")),r?import(r):()=>()=>{}]),p=this.getAttribute("component-export")||"default";if(!p.includes("."))this.Component=l[p];else{this.Component=l;for(let y of p.split("."))this.Component=this.Component[y]}return this.hydrator=h,this.hydrate},e,this)}catch(r){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,r)}}attributeChangedCallback(){this.hydrate()}},d(u,"observedAttributes",["props"]),u))}})();</script><astro-island uid="25zKME" prefix="r3" component-url="/_astro/BlogPost._FxswCuE.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{&quot;frontmatter&quot;:[0,{&quot;title&quot;:[0,&quot;Flutter todo list with supabase&quot;],&quot;description&quot;:[0,&quot;Building a simple todo list with supabase&quot;],&quot;alt&quot;:[0,&quot;my first blog post&quot;],&quot;tags&quot;:[1,[[0,&quot;flutter&quot;],[0,&quot;supabase&quot;]]],&quot;pubDate&quot;:[0,&quot;Sun, 7 Feburary 2023&quot;],&quot;imgSrc&quot;:[0,&quot;/imgs/2022/dall-e/DALL·E 2022-12-12 19.51.13 - fridge with blank paper on it.png&quot;],&quot;authors&quot;:[1,[[0,&quot;David Li&quot;]]],&quot;file&quot;:[0,&quot;/home/runner/work/blog-astro/blog-astro/src/pages/posts/tech/flutter_todo_list_with_supabase.md&quot;],&quot;url&quot;:[0,&quot;/posts/tech/flutter_todo_list_with_supabase&quot;]}]}" ssr="" client="load" opts="{&quot;name&quot;:&quot;BlogPost&quot;,&quot;value&quot;:true}" await-children=""><div class="mx-auto max-w-screen-lg px-3 py-6"><div><h1 class="text-center text-3xl font-bold">Flutter todo list with supabase</h1><div class="text-center text-sm text-gray-400"><div class="mt-1">Published:<!-- --> <!-- -->Feb 7, 2023</div><div class="mt-2 flex flex-wrap items-center justify-center gap-4"><div class="flex items-center space-x-2"><img src="/assets/images/avatars/david.png" alt="David Li" class="h-6 w-6 rounded-full object-cover" loading="lazy"/><a href="https://github.com/FriendlyUser" target="_blank" rel="noopener noreferrer" class="hover:underline">David Li</a></div></div></div><div class="flex place-content-center pt-2"><div class="rounded-md px-2 py-1 text-xs font-semibold bg-sky-400 text-sky-900"> <a href="/tags/flutter" style="padding-right:3px"> <category>flutter<!-- --> </category></a></div> <div class="rounded-md px-2 py-1 text-xs font-semibold bg-cyan-400 text-cyan-900"> <a href="/tags/supabase" style="padding-right:3px"> <category>supabase<!-- --> </category></a></div> </div><div class="mx-auto mt-5 max-w-prose"><div class="aspect-h-2 aspect-w-3"><img class="h-full w-full rounded-lg object-cover object-center" src="/imgs/2022/dall-e/DALL·E 2022-12-12 19.51.13 - fridge with blank paper on it.png" loading="lazy"/></div><div class="prose prose-invert mt-6 prose-img:rounded-lg"><content><astro-slot> <p>This code defines a Homepage widget that uses a FutureBuilder to display a list of todos fetched from an API. The FutureBuilder widget listens to a Future object and builds a widget based on the Future’s state. In this case, the Future is a <code>Future&#x3C;TodoModel></code> object that is created by calling the fetchTodos function. The TodoModel class is defined in a different file and is used to represent a list of todos.</p>
<p>The Homepage widget has a floating action button that navigates to a different page when pressed. This page is defined by the AddTodo widget and allows the user to add a new todo to the list.</p>
<p>The todos are displayed in a ListView, with each todo represented as a ListTile widget. Each ListTile widget has a title, a description, and two icons - one for marking a todo as done and one for deleting it. When a todo is marked as done or deleted, the FutureBuilder is rebuilt using the updated <code>Future&#x3C;TodoModel></code> object, which reflects the changes made to the list of todos.</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F92672">import</span><span style="color:#E6DB74"> 'package:flutter/material.dart'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#E6DB74"> 'package:supabase_flutter_todo/api/api.dart'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#E6DB74"> 'package:supabase_flutter_todo/model/todo_model.dart'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#E6DB74"> 'package:supabase_flutter_todo/screen/add_todo.dart'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#E6DB74"> '../api/sp_client.dart'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">class</span><span style="color:#66D9EF;font-style:italic"> Homepage</span><span style="color:#F92672"> extends</span><span style="color:#66D9EF;font-style:italic"> StatefulWidget</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">  const</span><span style="color:#66D9EF;font-style:italic"> Homepage</span><span style="color:#F8F8F2">({</span><span style="color:#66D9EF;font-style:italic">Key</span><span style="color:#F92672">?</span><span style="color:#F8F8F2"> key}) </span><span style="color:#F92672">:</span><span style="color:#FD971F"> super</span><span style="color:#F8F8F2">(key</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> key);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  @override</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  State</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">Homepage</span><span style="color:#F8F8F2">> </span><span style="color:#A6E22E">createState</span><span style="color:#F8F8F2">() </span><span style="color:#F92672">=></span><span style="color:#66D9EF;font-style:italic"> _HomepageState</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">class</span><span style="color:#66D9EF;font-style:italic"> _HomepageState</span><span style="color:#F92672"> extends</span><span style="color:#66D9EF;font-style:italic"> State</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">Homepage</span><span style="color:#F8F8F2">> {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  Future</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">TodoModel</span><span style="color:#F8F8F2">></span><span style="color:#F92672">?</span><span style="color:#F8F8F2"> futureTodoList;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  @override</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  void</span><span style="color:#A6E22E"> initState</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#FD971F">    super</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">initState</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">    futureTodoList </span><span style="color:#F92672">=</span><span style="color:#A6E22E"> fetchTodos</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  @override</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  Widget</span><span style="color:#A6E22E"> build</span><span style="color:#F8F8F2">(</span><span style="color:#66D9EF;font-style:italic">BuildContext</span><span style="color:#F8F8F2"> context) {</span></span>
<span class="line"><span style="color:#F92672">    return</span><span style="color:#66D9EF;font-style:italic"> Scaffold</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">      appBar</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> AppBar</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">        title</span><span style="color:#F92672">:</span><span style="color:#F92672"> const</span><span style="color:#66D9EF;font-style:italic"> Text</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'Todo List'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">      ),</span></span>
<span class="line"><span style="color:#F8F8F2">      body</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> Center</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">        child</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> FutureBuilder</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">TodoModel</span><span style="color:#F8F8F2">>(</span></span>
<span class="line"><span style="color:#F8F8F2">          future</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> futureTodoList,</span></span>
<span class="line"><span style="color:#F8F8F2">          builder</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> (context, snapshot) {</span></span>
<span class="line"><span style="color:#F92672">            if</span><span style="color:#F8F8F2"> (snapshot.hasData) {</span></span>
<span class="line"><span style="color:#F92672">              return</span><span style="color:#66D9EF;font-style:italic"> ListView</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">builder</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                  itemCount</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> snapshot.data</span><span style="color:#F92672">!</span><span style="color:#F8F8F2">.todos.length,</span></span>
<span class="line"><span style="color:#F8F8F2">                  itemBuilder</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> (</span><span style="color:#66D9EF;font-style:italic">BuildContext</span><span style="color:#F8F8F2"> context, </span><span style="color:#66D9EF;font-style:italic">int</span><span style="color:#F8F8F2"> index) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                    var</span><span style="color:#F8F8F2"> listItem </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> snapshot.data</span><span style="color:#F92672">!</span><span style="color:#F8F8F2">.todos[index];</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                    var</span><span style="color:#F8F8F2"> isDone </span><span style="color:#F92672">=</span><span style="color:#F8F8F2"> listItem.isDone;</span></span>
<span class="line"><span style="color:#F92672">                    return</span><span style="color:#66D9EF;font-style:italic"> ListTile</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                      title</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> Text</span><span style="color:#F8F8F2">(listItem.title),</span></span>
<span class="line"><span style="color:#F8F8F2">                      subtitle</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> Text</span><span style="color:#F8F8F2">(listItem.description),</span></span>
<span class="line"><span style="color:#F8F8F2">                      onTap</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> () </span><span style="color:#F92672">=></span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#88846F">                        // open menu for delete item?</span></span>
<span class="line"><span style="color:#88846F">                        // alert menu</span></span>
<span class="line"><span style="color:#A6E22E">                        showMenu</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                          position</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> RelativeRect</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">fromSize</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                            Rect</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">fromCenter</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                                center</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> Offset</span><span style="color:#F8F8F2">.zero, width</span><span style="color:#F92672">:</span><span style="color:#F92672"> -</span><span style="color:#AE81FF">100</span><span style="color:#F8F8F2">, height</span><span style="color:#F92672">:</span><span style="color:#F92672"> -</span><span style="color:#AE81FF">100</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F92672">                            const</span><span style="color:#66D9EF;font-style:italic"> Size</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">100</span><span style="color:#F8F8F2">, </span><span style="color:#AE81FF">100</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">                          ),</span></span>
<span class="line"><span style="color:#F8F8F2">                          items</span><span style="color:#F92672">:</span><span style="color:#F92672"> &#x3C;</span><span style="color:#66D9EF;font-style:italic">PopupMenuEntry</span><span style="color:#F92672">></span><span style="color:#F8F8F2">[</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                            PopupMenuItem</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                              child</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> Row</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                                children</span><span style="color:#F92672">:</span><span style="color:#F92672"> const</span><span style="color:#F92672"> &#x3C;</span><span style="color:#66D9EF;font-style:italic">Widget</span><span style="color:#F92672">></span><span style="color:#F8F8F2">[</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                                  Icon</span><span style="color:#F8F8F2">(</span><span style="color:#66D9EF;font-style:italic">Icons</span><span style="color:#F8F8F2">.delete),</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                                  Text</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">"Delete"</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">                                ],</span></span>
<span class="line"><span style="color:#F8F8F2">                              ),</span></span>
<span class="line"><span style="color:#F8F8F2">                            )</span></span>
<span class="line"><span style="color:#F8F8F2">                          ],</span></span>
<span class="line"><span style="color:#F8F8F2">                          context</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> context,</span></span>
<span class="line"><span style="color:#F8F8F2">                        )</span></span>
<span class="line"><span style="color:#F8F8F2">                      },</span></span>
<span class="line"><span style="color:#F8F8F2">                      trailing</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> isDone</span></span>
<span class="line"><span style="color:#F92672">                          ?</span><span style="color:#66D9EF;font-style:italic"> IconButton</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                              icon</span><span style="color:#F92672">:</span><span style="color:#F92672"> const</span><span style="color:#66D9EF;font-style:italic"> Icon</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                                  Icons</span><span style="color:#F8F8F2">.radio_button_checked_outlined),</span></span>
<span class="line"><span style="color:#F8F8F2">                              onPressed</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> () {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                                SBHelper</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">setDone</span><span style="color:#F8F8F2">(listItem.id, </span><span style="color:#AE81FF">false</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                                Future</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">delayed</span><span style="color:#F8F8F2">(</span><span style="color:#F92672">const</span><span style="color:#66D9EF;font-style:italic"> Duration</span><span style="color:#F8F8F2">(milliseconds</span><span style="color:#F92672">:</span><span style="color:#AE81FF"> 500</span><span style="color:#F8F8F2">), () {</span></span>
<span class="line"><span style="color:#A6E22E">                                  setState</span><span style="color:#F8F8F2">(() {</span></span>
<span class="line"><span style="color:#F8F8F2">                                    futureTodoList </span><span style="color:#F92672">=</span><span style="color:#A6E22E"> fetchTodos</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">                                  });</span></span>
<span class="line"><span style="color:#F8F8F2">                                });</span></span>
<span class="line"><span style="color:#F8F8F2">                              })</span></span>
<span class="line"><span style="color:#F92672">                          :</span><span style="color:#66D9EF;font-style:italic"> IconButton</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                              icon</span><span style="color:#F92672">:</span><span style="color:#F92672"> const</span><span style="color:#66D9EF;font-style:italic"> Icon</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                                  Icons</span><span style="color:#F8F8F2">.radio_button_unchecked_outlined),</span></span>
<span class="line"><span style="color:#F8F8F2">                              onPressed</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> () {</span></span>
<span class="line"><span style="color:#88846F">                                // send api call to check the todo</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                                SBHelper</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">setDone</span><span style="color:#F8F8F2">(listItem.id, </span><span style="color:#AE81FF">true</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                                Future</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">delayed</span><span style="color:#F8F8F2">(</span><span style="color:#F92672">const</span><span style="color:#66D9EF;font-style:italic"> Duration</span><span style="color:#F8F8F2">(milliseconds</span><span style="color:#F92672">:</span><span style="color:#AE81FF"> 500</span><span style="color:#F8F8F2">), () {</span></span>
<span class="line"><span style="color:#A6E22E">                                  setState</span><span style="color:#F8F8F2">(() {</span></span>
<span class="line"><span style="color:#F8F8F2">                                    futureTodoList </span><span style="color:#F92672">=</span><span style="color:#A6E22E"> fetchTodos</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">                                  });</span></span>
<span class="line"><span style="color:#F8F8F2">                                });</span></span>
<span class="line"><span style="color:#F8F8F2">                              }),</span></span>
<span class="line"><span style="color:#F8F8F2">                    );</span></span>
<span class="line"><span style="color:#F8F8F2">                  });</span></span>
<span class="line"><span style="color:#F8F8F2">            } </span><span style="color:#F92672">else</span><span style="color:#F92672"> if</span><span style="color:#F8F8F2"> (snapshot.hasError) {</span></span>
<span class="line"><span style="color:#F92672">              return</span><span style="color:#66D9EF;font-style:italic"> Text</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">"${</span><span style="color:#FD971F;font-style:italic">snapshot</span><span style="color:#E6DB74">.</span><span style="color:#FD971F;font-style:italic">error</span><span style="color:#E6DB74">}"</span><span style="color:#F8F8F2">);</span></span>
<span class="line"><span style="color:#F8F8F2">            }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88846F">            // By default, show a loading spinner.</span></span>
<span class="line"><span style="color:#F92672">            return</span><span style="color:#F92672"> const</span><span style="color:#66D9EF;font-style:italic"> CircularProgressIndicator</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">          },</span></span>
<span class="line"><span style="color:#F8F8F2">        ),</span></span>
<span class="line"><span style="color:#F8F8F2">      ),</span></span>
<span class="line"><span style="color:#F8F8F2">      floatingActionButton</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> FloatingActionButton</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">        onPressed</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> () {</span></span>
<span class="line"><span style="color:#88846F">          // Add your onPressed code here!</span></span>
<span class="line"><span style="color:#88846F">          // go to add todo page</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">          Navigator</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">push</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">            context,</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">            MaterialPageRoute</span><span style="color:#F8F8F2">(builder</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> (context) </span><span style="color:#F92672">=></span><span style="color:#F92672"> const</span><span style="color:#66D9EF;font-style:italic"> AddTodo</span><span style="color:#F8F8F2">()),</span></span>
<span class="line"><span style="color:#F8F8F2">          );</span></span>
<span class="line"><span style="color:#F8F8F2">        },</span></span>
<span class="line"><span style="color:#F8F8F2">        backgroundColor</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> Colors</span><span style="color:#F8F8F2">.green,</span></span>
<span class="line"><span style="color:#F8F8F2">        child</span><span style="color:#F92672">:</span><span style="color:#F92672"> const</span><span style="color:#66D9EF;font-style:italic"> Icon</span><span style="color:#F8F8F2">(</span><span style="color:#66D9EF;font-style:italic">Icons</span><span style="color:#F8F8F2">.add),</span></span>
<span class="line"><span style="color:#F8F8F2">      ),</span></span>
<span class="line"><span style="color:#F8F8F2">    );</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  Future</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">TodoModel</span><span style="color:#F8F8F2">> </span><span style="color:#A6E22E">fetchTodos</span><span style="color:#F8F8F2">() </span><span style="color:#F92672">async</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">    final</span><span style="color:#F8F8F2"> todoList </span><span style="color:#F92672">=</span><span style="color:#F92672"> await</span><span style="color:#66D9EF;font-style:italic"> SBHelper</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">getAllTodo</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F92672">    return</span><span style="color:#66D9EF;font-style:italic"> TodoModel</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">fromJson</span><span style="color:#F8F8F2">(todoList);</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F92672">import</span><span style="color:#E6DB74"> 'package:flutter/material.dart'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#E6DB74"> 'package:supabase_flutter_todo/api/sp_client.dart'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">class</span><span style="color:#66D9EF;font-style:italic"> AddTodo</span><span style="color:#F92672"> extends</span><span style="color:#66D9EF;font-style:italic"> StatefulWidget</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">  const</span><span style="color:#66D9EF;font-style:italic"> AddTodo</span><span style="color:#F8F8F2">({</span><span style="color:#66D9EF;font-style:italic">Key</span><span style="color:#F92672">?</span><span style="color:#F8F8F2"> key}) </span><span style="color:#F92672">:</span><span style="color:#FD971F"> super</span><span style="color:#F8F8F2">(key</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> key);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  @override</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  State</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">AddTodo</span><span style="color:#F8F8F2">> </span><span style="color:#A6E22E">createState</span><span style="color:#F8F8F2">() </span><span style="color:#F92672">=></span><span style="color:#66D9EF;font-style:italic"> _AddTodoState</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">class</span><span style="color:#66D9EF;font-style:italic"> _AddTodoState</span><span style="color:#F92672"> extends</span><span style="color:#66D9EF;font-style:italic"> State</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">AddTodo</span><span style="color:#F8F8F2">> {</span></span>
<span class="line"><span style="color:#F92672">  final</span><span style="color:#F8F8F2"> _formKey </span><span style="color:#F92672">=</span><span style="color:#66D9EF;font-style:italic"> GlobalKey</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">FormState</span><span style="color:#F8F8F2">>();</span></span>
<span class="line"><span style="color:#F92672">  final</span><span style="color:#F8F8F2"> titleController </span><span style="color:#F92672">=</span><span style="color:#66D9EF;font-style:italic"> TextEditingController</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F92672">  final</span><span style="color:#F8F8F2"> descController </span><span style="color:#F92672">=</span><span style="color:#66D9EF;font-style:italic"> TextEditingController</span><span style="color:#F8F8F2">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  @override</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">  Widget</span><span style="color:#A6E22E"> build</span><span style="color:#F8F8F2">(</span><span style="color:#66D9EF;font-style:italic">BuildContext</span><span style="color:#F8F8F2"> context) {</span></span>
<span class="line"><span style="color:#F92672">    return</span><span style="color:#66D9EF;font-style:italic"> Scaffold</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">      appBar</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> AppBar</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">        title</span><span style="color:#F92672">:</span><span style="color:#F92672"> const</span><span style="color:#66D9EF;font-style:italic"> Text</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'Add Todo'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">      ),</span></span>
<span class="line"><span style="color:#F8F8F2">      body</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> Form</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">        key</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> _formKey,</span></span>
<span class="line"><span style="color:#F8F8F2">        child</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> Padding</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">          padding</span><span style="color:#F92672">:</span><span style="color:#F92672"> const</span><span style="color:#66D9EF;font-style:italic"> EdgeInsets</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">all</span><span style="color:#F8F8F2">(</span><span style="color:#AE81FF">16.0</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">          child</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> Column</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">            children</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> [</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">              TextFormField</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                controller</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> titleController,</span></span>
<span class="line"><span style="color:#F8F8F2">                decoration</span><span style="color:#F92672">:</span><span style="color:#F92672"> const</span><span style="color:#66D9EF;font-style:italic"> InputDecoration</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                  border</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> OutlineInputBorder</span><span style="color:#F8F8F2">(),</span></span>
<span class="line"><span style="color:#F8F8F2">                  labelText</span><span style="color:#F92672">:</span><span style="color:#E6DB74"> 'Title'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">                ),</span></span>
<span class="line"><span style="color:#F8F8F2">                validator</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> (value) {</span></span>
<span class="line"><span style="color:#F92672">                  if</span><span style="color:#F8F8F2"> (value </span><span style="color:#F92672">==</span><span style="color:#AE81FF"> null</span><span style="color:#F92672"> ||</span><span style="color:#F8F8F2"> value.isEmpty) {</span></span>
<span class="line"><span style="color:#F92672">                    return</span><span style="color:#E6DB74"> 'Please enter title'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">                  }</span></span>
<span class="line"><span style="color:#F92672">                  return</span><span style="color:#AE81FF"> null</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">                },</span></span>
<span class="line"><span style="color:#F8F8F2">              ),</span></span>
<span class="line"><span style="color:#F92672">              const</span><span style="color:#66D9EF;font-style:italic"> SizedBox</span><span style="color:#F8F8F2">(height</span><span style="color:#F92672">:</span><span style="color:#AE81FF"> 16.0</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">              TextFormField</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                controller</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> descController,</span></span>
<span class="line"><span style="color:#F8F8F2">                decoration</span><span style="color:#F92672">:</span><span style="color:#F92672"> const</span><span style="color:#66D9EF;font-style:italic"> InputDecoration</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                  border</span><span style="color:#F92672">:</span><span style="color:#66D9EF;font-style:italic"> OutlineInputBorder</span><span style="color:#F8F8F2">(),</span></span>
<span class="line"><span style="color:#F8F8F2">                  labelText</span><span style="color:#F92672">:</span><span style="color:#E6DB74"> 'Description'</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">                ),</span></span>
<span class="line"><span style="color:#F8F8F2">                validator</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> (value) {</span></span>
<span class="line"><span style="color:#F92672">                  if</span><span style="color:#F8F8F2"> (value </span><span style="color:#F92672">==</span><span style="color:#AE81FF"> null</span><span style="color:#F92672"> ||</span><span style="color:#F8F8F2"> value.isEmpty) {</span></span>
<span class="line"><span style="color:#F92672">                    return</span><span style="color:#E6DB74"> 'Please enter description'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">                  }</span></span>
<span class="line"><span style="color:#F92672">                  return</span><span style="color:#AE81FF"> null</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F8F8F2">                },</span></span>
<span class="line"><span style="color:#F8F8F2">              ),</span></span>
<span class="line"><span style="color:#F92672">              const</span><span style="color:#66D9EF;font-style:italic"> SizedBox</span><span style="color:#F8F8F2">(height</span><span style="color:#F92672">:</span><span style="color:#AE81FF"> 16.0</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">              ElevatedButton</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#F8F8F2">                onPressed</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> () {</span></span>
<span class="line"><span style="color:#F92672">                  if</span><span style="color:#F8F8F2"> (_formKey.currentState</span><span style="color:#F92672">!</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">validate</span><span style="color:#F8F8F2">()) {</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                    SBHelper</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">addTodo</span><span style="color:#F8F8F2">(titleController.text, descController.text);</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">                    Navigator</span><span style="color:#F8F8F2">.</span><span style="color:#A6E22E">pop</span><span style="color:#F8F8F2">(context);</span></span>
<span class="line"><span style="color:#F8F8F2">                  }</span></span>
<span class="line"><span style="color:#F8F8F2">                },</span></span>
<span class="line"><span style="color:#F8F8F2">                child</span><span style="color:#F92672">:</span><span style="color:#F92672"> const</span><span style="color:#66D9EF;font-style:italic"> Text</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'Submit'</span><span style="color:#F8F8F2">),</span></span>
<span class="line"><span style="color:#F8F8F2">              )</span></span>
<span class="line"><span style="color:#F8F8F2">            ],</span></span>
<span class="line"><span style="color:#F8F8F2">          ),</span></span>
<span class="line"><span style="color:#F8F8F2">        ),</span></span>
<span class="line"><span style="color:#F8F8F2">      ),</span></span>
<span class="line"><span style="color:#F8F8F2">    );</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>This code defines a AddTodo widget that allows the user to add a new todo to the list. The widget contains a form with two text fields - one for the title of the todo and one for its description. The form is validated using the Form widget’s validate method, and if the form is valid, the todo is added to the list by calling the SBHelper.addTodo function. This function is defined in the sp_client.dart file and is used to add a new todo to the list via the API. Once the todo is added, the user is redirected back to the Homepage widget.</p>
<pre class="astro-code monokai" style="background-color:#272822;color:#F8F8F2; overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:#F92672">import</span><span style="color:#E6DB74"> 'package:supabase/supabase.dart'</span><span style="color:#F8F8F2">;</span></span>
<span class="line"><span style="color:#F92672">import</span><span style="color:#E6DB74"> "package:supabase_flutter_todo/constants.dart"</span><span style="color:#F8F8F2">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">class</span><span style="color:#66D9EF;font-style:italic"> SBHelper</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">  static</span><span style="color:#F92672"> final</span><span style="color:#66D9EF;font-style:italic"> SupabaseClient</span><span style="color:#F8F8F2"> supabase </span><span style="color:#F92672">=</span><span style="color:#66D9EF;font-style:italic"> SupabaseClient</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">    Constants</span><span style="color:#F8F8F2">.supabaseUrl,</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">    Constants</span><span style="color:#F8F8F2">.supabaseAnnonKey</span></span>
<span class="line"><span style="color:#F8F8F2">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">  static</span><span style="color:#66D9EF;font-style:italic"> SupabaseClient</span><span style="color:#A6E22E"> getClient</span><span style="color:#F8F8F2">() {</span></span>
<span class="line"><span style="color:#F92672">    return</span><span style="color:#F8F8F2"> supabase;</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F92672">  static</span><span style="color:#66D9EF;font-style:italic"> Future</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">List</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">dynamic</span><span style="color:#F8F8F2">>> </span><span style="color:#A6E22E">getAllTodo</span><span style="color:#F8F8F2">() </span><span style="color:#F92672">async</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">    final</span><span style="color:#F8F8F2"> response </span><span style="color:#F92672">=</span><span style="color:#F92672"> await</span><span style="color:#F8F8F2"> supabase.</span><span style="color:#A6E22E">from</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'todo'</span><span style="color:#F8F8F2">).</span><span style="color:#A6E22E">select</span><span style="color:#F8F8F2">();</span></span>
<span class="line"><span style="color:#F92672">    return</span><span style="color:#F8F8F2"> response;</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#88846F">  // add todo</span></span>
<span class="line"><span style="color:#F92672">  static</span><span style="color:#66D9EF;font-style:italic"> Future</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">Map</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">String</span><span style="color:#F8F8F2">, </span><span style="color:#66D9EF;font-style:italic">dynamic</span><span style="color:#F8F8F2">>> </span><span style="color:#A6E22E">addTodo</span><span style="color:#F8F8F2">(</span></span>
<span class="line"><span style="color:#66D9EF;font-style:italic">      String</span><span style="color:#F8F8F2"> title, </span><span style="color:#66D9EF;font-style:italic">String</span><span style="color:#F8F8F2"> description) </span><span style="color:#F92672">async</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">    final</span><span style="color:#F8F8F2"> response </span><span style="color:#F92672">=</span><span style="color:#F92672"> await</span><span style="color:#F8F8F2"> supabase.</span><span style="color:#A6E22E">from</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'todo'</span><span style="color:#F8F8F2">).</span><span style="color:#A6E22E">insert</span><span style="color:#F8F8F2">([</span></span>
<span class="line"><span style="color:#F8F8F2">      {</span></span>
<span class="line"><span style="color:#E6DB74">        'title'</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> title,</span></span>
<span class="line"><span style="color:#E6DB74">        'description'</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> description,</span></span>
<span class="line"><span style="color:#E6DB74">        'isDone'</span><span style="color:#F92672">:</span><span style="color:#AE81FF"> false</span><span style="color:#F8F8F2">,</span></span>
<span class="line"><span style="color:#F8F8F2">      }</span></span>
<span class="line"><span style="color:#F8F8F2">    ]);</span></span>
<span class="line"><span style="color:#F92672">    return</span><span style="color:#F8F8F2"> response;</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#88846F">  // set isDone flag to true</span></span>
<span class="line"><span style="color:#F92672">  static</span><span style="color:#66D9EF;font-style:italic"> Future</span><span style="color:#F8F8F2">&#x3C;</span><span style="color:#66D9EF;font-style:italic">void</span><span style="color:#F8F8F2">> </span><span style="color:#A6E22E">setDone</span><span style="color:#F8F8F2">(</span><span style="color:#66D9EF;font-style:italic">int</span><span style="color:#F8F8F2"> id, </span><span style="color:#66D9EF;font-style:italic">bool</span><span style="color:#F8F8F2"> isDone) </span><span style="color:#F92672">async</span><span style="color:#F8F8F2"> {</span></span>
<span class="line"><span style="color:#F92672">    await</span><span style="color:#F8F8F2"> supabase.</span><span style="color:#A6E22E">from</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'todo'</span><span style="color:#F8F8F2">).</span><span style="color:#A6E22E">update</span><span style="color:#F8F8F2">({</span><span style="color:#E6DB74">'isDone'</span><span style="color:#F92672">:</span><span style="color:#F8F8F2"> isDone}).</span><span style="color:#A6E22E">eq</span><span style="color:#F8F8F2">(</span><span style="color:#E6DB74">'id'</span><span style="color:#F8F8F2">, id);</span></span>
<span class="line"><span style="color:#F8F8F2">  }</span></span>
<span class="line"><span style="color:#F8F8F2">}</span></span></code></pre>
<p>This code defines a SBHelper class that provides utility functions for interacting with the API. The SBHelper class uses the SupabaseClient class from the supabase package to make HTTP requests to the API. The SupabaseClient class takes the URL of the API and an authorization key as arguments and uses these to authenticate requests made to the API.</p>
<p>The SBHelper class has three static functions - getAllTodo, addTodo, and setDone. The getAllTodo function makes a SELECT request to the API to get a list of all todos in the database. The addTodo function makes an INSERT request to the API to add a new todo to the database. The setDone function makes an UPDATE request to the API to set the isDone flag of a todo to true or false, depending on the value passed to the function.</p>
<h2 id="references">References</h2>
<ul>
<li><a href="https://github.com/FriendlyUser/supabase_flutter_todo">https://github.com/FriendlyUser/supabase_flutter_todo</a></li>
</ul> </astro-slot></content></div><div id="comments"></div></div></div></div><!--astro:end--></astro-island> <div class="mx-auto mt-5 max-w-prose flex justify-between gap-4 border-t border-gray-700 pt-8 text-sm text-gray-400 dark:text-gray-500"> <div class="w-full sm:w-[48%] xl:w-auto"> <div class="text-xs uppercase">Previous</div> <a class="text-blue-400 hover:underline" href="/posts/tech/js/intro_to_js"> Introduction to javascript free ebook </a> </div> <div class="text-right w-full sm:w-[48%] xl:w-auto"> <div class="text-xs uppercase">Next</div> <a class="text-blue-400 hover:underline" href="/posts/tech/python/getting_started_with_opencv"> Getting started in opencv with python </a> </div> </div><div class="mt-6 text-center"> <a href="/posts" class="text-blue-400 hover:underline text-sm">
&larr; Back to blog
</a> </div> <astro-island uid="1KiplR" prefix="r0" component-url="/_astro/ScrollButtons.BdAHGQrx.js" component-export="default" renderer-url="/_astro/client.D9Vng9vH.js" props="{}" ssr="" client="load" opts="{&quot;name&quot;:&quot;ScrollButtons&quot;,&quot;value&quot;:true}" await-children=""><div class="fixed bottom-8 right-8 z-50 flex flex-col gap-3 opacity-0 transition-opacity duration-300"><button aria-label="Scroll to comments" class="rounded-full bg-gray-200 p-2 text-gray-600 shadow-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll to top" class="rounded-full bg-gray-200 p-2 text-gray-600 shadow-md hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><!--astro:end--></astro-island>  </div> <div class="mx-auto max-w-screen-lg px-3 py-6"><div class="no-print border-t border-gray-600 pt-5"><div class="text-sm text-gray-200">© Copyright <!-- -->2025<!-- --> by <!-- -->Dhanushka&#x27;s Blog<!-- -->. Built with ♥ by<!-- --> <a class="text-cyan-400 hover:underline" href="https://github.com/dhanushka2001" target="_blank" rel="noopener noreferrer">Dhanushka</a>. Last updated on <!-- -->2025-07-11<!-- -->.</div></div></div> </body></html>